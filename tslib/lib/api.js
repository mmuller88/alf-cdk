"use strict";
/* tslint:disable */
/* eslint-disable */
/**
 * The Alfresco Provisioner
 * First of all. Thank you for joining the closed alpha. Your feedback will be much welcomed. The Alfresco Provisioner is a managed service to provide Alfresco backends with an awesome experience. For more details please look https://martinmueller.dev/alf-provisioner-eng.  As the Alfresco Provisioner is a managed service to provide Alfresco backends it would be very great if you could get a roughly overview about what the Alfresco products are for. In my blog post mentioned above I give you a rough overview about the Alfresco products in the Closed Alpha section.  As this is an alpha version, you will find for sure bugs. Please report them back to me under: damadden88@googlemail.com  Notice: As this is an early version of the Alfresco Provisioner a lot features are not implemented yet.  I decided not to bother much with the complexity of authorization and permission yet. I will add those as a layer. So for now it is possible to alter resources belonging to an other user than you. Please don\'t do that if not agreed and only use your username for instance creation. Anyway the endpoints themself are indeed secured with oauth2 and an implicit grant which is put in the Authorization header. SO USING THE AUTHORIZE POPUP IN THE UI ISN\'T NECESSARY.  If you see returning a 401 with the message \"The incoming token has expired\" just refresh the page and a new token will be generated.  For cost saving reasons per default the EC2 instance will stop themself after 45 minutes after creation or update. You can start the instance again with using the PUT endpoint. As well you are only allowed to create a maximum of 2 instances per user. Please terminate not used instances with the PUT endpoint and \"expectedStatus\" = \"terminated\".  How to start?: Simply explore the provided endpoints in the next section. The endpoints in the tag group named instances are showing your / all existent Alfresco Instanzes. The group tag named instances-conf helps to request alfresco instances or alter them. For a starter you could use the POST Endpoint to request the creation of an Alfresco instanz. Than check your request with the GET endpoints in the instance-conf tag group. If your instance request was granted you will find your instanz in the instances tag group. Please regard that the alfresco url will be available after about 3 minutes as it takes a bit for ACS to boot successfully. After that /share /alfresco and ACA / will be reachable on the url similar looking to iab12.i.alfpro.net .  Implemented features:   * Start, Stopping and Terminating of Alfresco instances   * Accessing ACA, Share and Alfresco Urls (more details look for the url property definition below)   * Cost Saving feature for stopping the instances after 45 minutes   * Asynchronacl communication with the Alfresco Provisioner server   * using the authenticated username as userId for convenience  Planned features in near future:   * Status endpoint for instance creation progress   * Adding an Auto Scaling in front of the ec2 image for autoself healing and a health check if ACS is finished booting and ready   * SSL encryption. Currently there is no HTTPS configured with the Proxy in front of each Alfresco instanz provisioned by the Provisioner. So be cautious to not store sensible data!   * Email notification. I plan to send an email when your Alfresco Instanz is ready. But for now you need to check the progress on the GET /instances-conf endpoint and the info property.  Planned features in more distance future:   * Stopping instances after inactivity and not the static 45 minutes.   * Potentially Load Balancer in front to drive multiple instances for bigger use cases  Again thank you so much for testing the Alfresco Provisioner. Any feedback is much welcomed! Please let me know on damadden88@googlemail.com .
 *
 * The version of the OpenAPI document: 1.0.3
 *
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.InstancesConfApi = exports.InstancesConfApiFactory = exports.InstancesConfApiFp = exports.InstancesConfApiAxiosParamCreator = exports.InstancesApi = exports.InstancesApiFactory = exports.InstancesApiFp = exports.InstancesApiAxiosParamCreator = exports.Status = exports.ExpectedStatus = exports.AlfTypeGitRepoEnum = exports.AlfTypeEc2InstanceTypeEnum = void 0;
const axios_1 = require("axios");
// Some imports not used depending on template conditions
// @ts-ignore
const base_1 = require("./base");
/**
    * @export
    * @enum {string}
    */
var AlfTypeEc2InstanceTypeEnum;
(function (AlfTypeEc2InstanceTypeEnum) {
    AlfTypeEc2InstanceTypeEnum["Large"] = "t2.large";
    AlfTypeEc2InstanceTypeEnum["Xlarge"] = "t2.xlarge";
})(AlfTypeEc2InstanceTypeEnum = exports.AlfTypeEc2InstanceTypeEnum || (exports.AlfTypeEc2InstanceTypeEnum = {}));
/**
    * @export
    * @enum {string}
    */
var AlfTypeGitRepoEnum;
(function (AlfTypeGitRepoEnum) {
    AlfTypeGitRepoEnum["AlfEc21"] = "alf-ec2-1";
})(AlfTypeGitRepoEnum = exports.AlfTypeGitRepoEnum || (exports.AlfTypeGitRepoEnum = {}));
/**
 * The state you are allow to put your instance in. Warning putting instances into terminated will delete the instance-conf and instance!
 * @export
 * @enum {string}
 */
var ExpectedStatus;
(function (ExpectedStatus) {
    ExpectedStatus["Running"] = "running";
    ExpectedStatus["Terminated"] = "terminated";
    ExpectedStatus["Stopped"] = "stopped";
})(ExpectedStatus = exports.ExpectedStatus || (exports.ExpectedStatus = {}));
/**
 * Shows the current state. Even if your instance is in the running state it might take some minutes until the provided url is reachable.
 * @export
 * @enum {string}
 */
var Status;
(function (Status) {
    Status["Running"] = "running";
    Status["Terminated"] = "terminated";
    Status["Stopped"] = "stopped";
    Status["Pending"] = "pending";
    Status["Stopping"] = "stopping";
})(Status = exports.Status || (exports.Status = {}));
/**
 * InstancesApi - axios parameter creator
 * @export
 */
exports.InstancesApiAxiosParamCreator = function (configuration) {
    return {
        /**
         * Gets details about a specific instanceId.
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        getInstance: async (instanceId, options = {}) => {
            // verify required parameter 'instanceId' is not null or undefined
            if (instanceId === null || instanceId === undefined) {
                throw new base_1.RequiredError('instanceId', 'Required parameter instanceId was null or undefined when calling getInstance.');
            }
            const localVarPath = `/instances/{instanceId}`
                .replace(`{${"instanceId"}}`, encodeURIComponent(String(instanceId)));
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
        /**
         * Gets details about all running Alfresco instances. Notice as there is no permission context implemented yet you can view all / specific instances with leaving out the userId parameter oder take a userId from another user.
         * @param {object} [userId] User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        getInstances: async (userId, options = {}) => {
            const localVarPath = `/instances`;
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            if (userId !== undefined) {
                localVarQueryParameter['userId'] = userId;
            }
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
        /**
         *
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        optionsInstance: async (instanceId, options = {}) => {
            // verify required parameter 'instanceId' is not null or undefined
            if (instanceId === null || instanceId === undefined) {
                throw new base_1.RequiredError('instanceId', 'Required parameter instanceId was null or undefined when calling optionsInstance.');
            }
            const localVarPath = `/instances/{instanceId}`
                .replace(`{${"instanceId"}}`, encodeURIComponent(String(instanceId)));
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'OPTIONS', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
        /**
         *
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        optionsInstances: async (options = {}) => {
            const localVarPath = `/instances`;
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'OPTIONS', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
    };
};
/**
 * InstancesApi - functional programming interface
 * @export
 */
exports.InstancesApiFp = function (configuration) {
    return {
        /**
         * Gets details about a specific instanceId.
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async getInstance(instanceId, options) {
            const localVarAxiosArgs = await exports.InstancesApiAxiosParamCreator(configuration).getInstance(instanceId, options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
        /**
         * Gets details about all running Alfresco instances. Notice as there is no permission context implemented yet you can view all / specific instances with leaving out the userId parameter oder take a userId from another user.
         * @param {object} [userId] User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async getInstances(userId, options) {
            const localVarAxiosArgs = await exports.InstancesApiAxiosParamCreator(configuration).getInstances(userId, options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
        /**
         *
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async optionsInstance(instanceId, options) {
            const localVarAxiosArgs = await exports.InstancesApiAxiosParamCreator(configuration).optionsInstance(instanceId, options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
        /**
         *
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async optionsInstances(options) {
            const localVarAxiosArgs = await exports.InstancesApiAxiosParamCreator(configuration).optionsInstances(options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
    };
};
/**
 * InstancesApi - factory interface
 * @export
 */
exports.InstancesApiFactory = function (configuration, basePath, axios) {
    return {
        /**
         * Gets details about a specific instanceId.
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        getInstance(instanceId, options) {
            return exports.InstancesApiFp(configuration).getInstance(instanceId, options).then((request) => request(axios, basePath));
        },
        /**
         * Gets details about all running Alfresco instances. Notice as there is no permission context implemented yet you can view all / specific instances with leaving out the userId parameter oder take a userId from another user.
         * @param {object} [userId] User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        getInstances(userId, options) {
            return exports.InstancesApiFp(configuration).getInstances(userId, options).then((request) => request(axios, basePath));
        },
        /**
         *
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        optionsInstance(instanceId, options) {
            return exports.InstancesApiFp(configuration).optionsInstance(instanceId, options).then((request) => request(axios, basePath));
        },
        /**
         *
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        optionsInstances(options) {
            return exports.InstancesApiFp(configuration).optionsInstances(options).then((request) => request(axios, basePath));
        },
    };
};
/**
 * InstancesApi - object-oriented interface
 * @export
 * @class InstancesApi
 * @extends {BaseAPI}
 */
class InstancesApi extends base_1.BaseAPI {
    /**
     * Gets details about a specific instanceId.
     * @param {object} instanceId
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesApi
     */
    getInstance(instanceId, options) {
        return exports.InstancesApiFp(this.configuration).getInstance(instanceId, options).then((request) => request(this.axios, this.basePath));
    }
    /**
     * Gets details about all running Alfresco instances. Notice as there is no permission context implemented yet you can view all / specific instances with leaving out the userId parameter oder take a userId from another user.
     * @param {object} [userId] User id Query Parameter. Please use you user name from the system.
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesApi
     */
    getInstances(userId, options) {
        return exports.InstancesApiFp(this.configuration).getInstances(userId, options).then((request) => request(this.axios, this.basePath));
    }
    /**
     *
     * @param {object} instanceId
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesApi
     */
    optionsInstance(instanceId, options) {
        return exports.InstancesApiFp(this.configuration).optionsInstance(instanceId, options).then((request) => request(this.axios, this.basePath));
    }
    /**
     *
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesApi
     */
    optionsInstances(options) {
        return exports.InstancesApiFp(this.configuration).optionsInstances(options).then((request) => request(this.axios, this.basePath));
    }
}
exports.InstancesApi = InstancesApi;
/**
 * InstancesConfApi - axios parameter creator
 * @export
 */
exports.InstancesConfApiAxiosParamCreator = function (configuration) {
    return {
        /**
         * Creates an Alfresco instance request. Per userId you can only create max 2 instances! Please check how much you already have created as you don\'t get a warning here!  After your created successfully an instance request check out the GET /instances​/{instanceId} endpoint with your instanceId.  Please regard that the alfresco instance needs about 3 minutes for beeing reachable.
         * @param {NewInstanceConf} newInstanceConf Body for Alf Instance Create. Please insert your username for userId.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        addInstanceConf: async (newInstanceConf, options = {}) => {
            // verify required parameter 'newInstanceConf' is not null or undefined
            if (newInstanceConf === null || newInstanceConf === undefined) {
                throw new base_1.RequiredError('newInstanceConf', 'Required parameter newInstanceConf was null or undefined when calling addInstanceConf.');
            }
            const localVarPath = `/instances-conf`;
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'POST', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            localVarHeaderParameter['Content-Type'] = 'application/json';
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            const needsSerialization = (typeof newInstanceConf !== "string") && configuration.isJsonMime(localVarRequestOptions.headers['Content-Type']);
            localVarRequestOptions.data = needsSerialization ? JSON.stringify(newInstanceConf !== undefined ? newInstanceConf : {}) : (newInstanceConf || "");
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
        /**
         * Gets details about a specific alfresco request configuration.
         * @param {object} instanceId
         * @param {object} userId User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        getInstanceConf: async (instanceId, userId, options = {}) => {
            // verify required parameter 'instanceId' is not null or undefined
            if (instanceId === null || instanceId === undefined) {
                throw new base_1.RequiredError('instanceId', 'Required parameter instanceId was null or undefined when calling getInstanceConf.');
            }
            // verify required parameter 'userId' is not null or undefined
            if (userId === null || userId === undefined) {
                throw new base_1.RequiredError('userId', 'Required parameter userId was null or undefined when calling getInstanceConf.');
            }
            const localVarPath = `/instances-conf/{instanceId}`
                .replace(`{${"instanceId"}}`, encodeURIComponent(String(instanceId)));
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            if (userId !== undefined) {
                localVarQueryParameter['userId'] = userId;
            }
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
        /**
         * Gets details about all requested Alfresco instances. If you see here your requested Alfresco instance it is likely that it was created already. However it is not guarented as might your limit per user is reached or other the overall maximum limit of instances was reached.
         * @param {object} [userId] User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        getInstanceConfs: async (userId, options = {}) => {
            const localVarPath = `/instances-conf`;
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'GET', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            if (userId !== undefined) {
                localVarQueryParameter['userId'] = userId;
            }
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
        /**
         *
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        optionInstanceConf: async (options = {}) => {
            const localVarPath = `/instances-conf`;
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'OPTIONS', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
        /**
         *
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        optionsInstancesConf: async (instanceId, options = {}) => {
            // verify required parameter 'instanceId' is not null or undefined
            if (instanceId === null || instanceId === undefined) {
                throw new base_1.RequiredError('instanceId', 'Required parameter instanceId was null or undefined when calling optionsInstancesConf.');
            }
            const localVarPath = `/instances-conf/{instanceId}`
                .replace(`{${"instanceId"}}`, encodeURIComponent(String(instanceId)));
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'OPTIONS', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
        /**
         * Requests attribute instance changes. Please regard if you put back your instance from stopped to running it can take some minutes for ACS finishing booting.
         * @param {object} instanceId
         * @param {PutInstanceConf} putInstanceConf Body for Alf Instance Update. Currently only the update of the status is supported!
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        updateInstanceConf: async (instanceId, putInstanceConf, options = {}) => {
            // verify required parameter 'instanceId' is not null or undefined
            if (instanceId === null || instanceId === undefined) {
                throw new base_1.RequiredError('instanceId', 'Required parameter instanceId was null or undefined when calling updateInstanceConf.');
            }
            // verify required parameter 'putInstanceConf' is not null or undefined
            if (putInstanceConf === null || putInstanceConf === undefined) {
                throw new base_1.RequiredError('putInstanceConf', 'Required parameter putInstanceConf was null or undefined when calling updateInstanceConf.');
            }
            const localVarPath = `/instances-conf/{instanceId}`
                .replace(`{${"instanceId"}}`, encodeURIComponent(String(instanceId)));
            // use dummy base URL string because the URL constructor only accepts absolute URLs.
            const localVarUrlObj = new URL(localVarPath, 'https://example.com');
            let baseOptions;
            if (configuration) {
                baseOptions = configuration.baseOptions;
            }
            const localVarRequestOptions = { method: 'PUT', ...baseOptions, ...options };
            const localVarHeaderParameter = {};
            const localVarQueryParameter = {};
            localVarHeaderParameter['Content-Type'] = 'application/json';
            const queryParameters = new URLSearchParams(localVarUrlObj.search);
            for (const key in localVarQueryParameter) {
                queryParameters.set(key, localVarQueryParameter[key]);
            }
            for (const key in options.query) {
                queryParameters.set(key, options.query[key]);
            }
            localVarUrlObj.search = (new URLSearchParams(queryParameters)).toString();
            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : {};
            localVarRequestOptions.headers = { ...localVarHeaderParameter, ...headersFromBaseOptions, ...options.headers };
            const needsSerialization = (typeof putInstanceConf !== "string") && configuration.isJsonMime(localVarRequestOptions.headers['Content-Type']);
            localVarRequestOptions.data = needsSerialization ? JSON.stringify(putInstanceConf !== undefined ? putInstanceConf : {}) : (putInstanceConf || "");
            return {
                url: localVarUrlObj.pathname + localVarUrlObj.search + localVarUrlObj.hash,
                options: localVarRequestOptions,
            };
        },
    };
};
/**
 * InstancesConfApi - functional programming interface
 * @export
 */
exports.InstancesConfApiFp = function (configuration) {
    return {
        /**
         * Creates an Alfresco instance request. Per userId you can only create max 2 instances! Please check how much you already have created as you don\'t get a warning here!  After your created successfully an instance request check out the GET /instances​/{instanceId} endpoint with your instanceId.  Please regard that the alfresco instance needs about 3 minutes for beeing reachable.
         * @param {NewInstanceConf} newInstanceConf Body for Alf Instance Create. Please insert your username for userId.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async addInstanceConf(newInstanceConf, options) {
            const localVarAxiosArgs = await exports.InstancesConfApiAxiosParamCreator(configuration).addInstanceConf(newInstanceConf, options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
        /**
         * Gets details about a specific alfresco request configuration.
         * @param {object} instanceId
         * @param {object} userId User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async getInstanceConf(instanceId, userId, options) {
            const localVarAxiosArgs = await exports.InstancesConfApiAxiosParamCreator(configuration).getInstanceConf(instanceId, userId, options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
        /**
         * Gets details about all requested Alfresco instances. If you see here your requested Alfresco instance it is likely that it was created already. However it is not guarented as might your limit per user is reached or other the overall maximum limit of instances was reached.
         * @param {object} [userId] User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async getInstanceConfs(userId, options) {
            const localVarAxiosArgs = await exports.InstancesConfApiAxiosParamCreator(configuration).getInstanceConfs(userId, options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
        /**
         *
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async optionInstanceConf(options) {
            const localVarAxiosArgs = await exports.InstancesConfApiAxiosParamCreator(configuration).optionInstanceConf(options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
        /**
         *
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async optionsInstancesConf(instanceId, options) {
            const localVarAxiosArgs = await exports.InstancesConfApiAxiosParamCreator(configuration).optionsInstancesConf(instanceId, options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
        /**
         * Requests attribute instance changes. Please regard if you put back your instance from stopped to running it can take some minutes for ACS finishing booting.
         * @param {object} instanceId
         * @param {PutInstanceConf} putInstanceConf Body for Alf Instance Update. Currently only the update of the status is supported!
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        async updateInstanceConf(instanceId, putInstanceConf, options) {
            const localVarAxiosArgs = await exports.InstancesConfApiAxiosParamCreator(configuration).updateInstanceConf(instanceId, putInstanceConf, options);
            return (axios = axios_1.default, basePath = base_1.BASE_PATH) => {
                const axiosRequestArgs = { ...localVarAxiosArgs.options, url: basePath + localVarAxiosArgs.url };
                return axios.request(axiosRequestArgs);
            };
        },
    };
};
/**
 * InstancesConfApi - factory interface
 * @export
 */
exports.InstancesConfApiFactory = function (configuration, basePath, axios) {
    return {
        /**
         * Creates an Alfresco instance request. Per userId you can only create max 2 instances! Please check how much you already have created as you don\'t get a warning here!  After your created successfully an instance request check out the GET /instances​/{instanceId} endpoint with your instanceId.  Please regard that the alfresco instance needs about 3 minutes for beeing reachable.
         * @param {NewInstanceConf} newInstanceConf Body for Alf Instance Create. Please insert your username for userId.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        addInstanceConf(newInstanceConf, options) {
            return exports.InstancesConfApiFp(configuration).addInstanceConf(newInstanceConf, options).then((request) => request(axios, basePath));
        },
        /**
         * Gets details about a specific alfresco request configuration.
         * @param {object} instanceId
         * @param {object} userId User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        getInstanceConf(instanceId, userId, options) {
            return exports.InstancesConfApiFp(configuration).getInstanceConf(instanceId, userId, options).then((request) => request(axios, basePath));
        },
        /**
         * Gets details about all requested Alfresco instances. If you see here your requested Alfresco instance it is likely that it was created already. However it is not guarented as might your limit per user is reached or other the overall maximum limit of instances was reached.
         * @param {object} [userId] User id Query Parameter. Please use you user name from the system.
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        getInstanceConfs(userId, options) {
            return exports.InstancesConfApiFp(configuration).getInstanceConfs(userId, options).then((request) => request(axios, basePath));
        },
        /**
         *
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        optionInstanceConf(options) {
            return exports.InstancesConfApiFp(configuration).optionInstanceConf(options).then((request) => request(axios, basePath));
        },
        /**
         *
         * @param {object} instanceId
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        optionsInstancesConf(instanceId, options) {
            return exports.InstancesConfApiFp(configuration).optionsInstancesConf(instanceId, options).then((request) => request(axios, basePath));
        },
        /**
         * Requests attribute instance changes. Please regard if you put back your instance from stopped to running it can take some minutes for ACS finishing booting.
         * @param {object} instanceId
         * @param {PutInstanceConf} putInstanceConf Body for Alf Instance Update. Currently only the update of the status is supported!
         * @param {*} [options] Override http request option.
         * @throws {RequiredError}
         */
        updateInstanceConf(instanceId, putInstanceConf, options) {
            return exports.InstancesConfApiFp(configuration).updateInstanceConf(instanceId, putInstanceConf, options).then((request) => request(axios, basePath));
        },
    };
};
/**
 * InstancesConfApi - object-oriented interface
 * @export
 * @class InstancesConfApi
 * @extends {BaseAPI}
 */
class InstancesConfApi extends base_1.BaseAPI {
    /**
     * Creates an Alfresco instance request. Per userId you can only create max 2 instances! Please check how much you already have created as you don\'t get a warning here!  After your created successfully an instance request check out the GET /instances​/{instanceId} endpoint with your instanceId.  Please regard that the alfresco instance needs about 3 minutes for beeing reachable.
     * @param {NewInstanceConf} newInstanceConf Body for Alf Instance Create. Please insert your username for userId.
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesConfApi
     */
    addInstanceConf(newInstanceConf, options) {
        return exports.InstancesConfApiFp(this.configuration).addInstanceConf(newInstanceConf, options).then((request) => request(this.axios, this.basePath));
    }
    /**
     * Gets details about a specific alfresco request configuration.
     * @param {object} instanceId
     * @param {object} userId User id Query Parameter. Please use you user name from the system.
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesConfApi
     */
    getInstanceConf(instanceId, userId, options) {
        return exports.InstancesConfApiFp(this.configuration).getInstanceConf(instanceId, userId, options).then((request) => request(this.axios, this.basePath));
    }
    /**
     * Gets details about all requested Alfresco instances. If you see here your requested Alfresco instance it is likely that it was created already. However it is not guarented as might your limit per user is reached or other the overall maximum limit of instances was reached.
     * @param {object} [userId] User id Query Parameter. Please use you user name from the system.
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesConfApi
     */
    getInstanceConfs(userId, options) {
        return exports.InstancesConfApiFp(this.configuration).getInstanceConfs(userId, options).then((request) => request(this.axios, this.basePath));
    }
    /**
     *
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesConfApi
     */
    optionInstanceConf(options) {
        return exports.InstancesConfApiFp(this.configuration).optionInstanceConf(options).then((request) => request(this.axios, this.basePath));
    }
    /**
     *
     * @param {object} instanceId
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesConfApi
     */
    optionsInstancesConf(instanceId, options) {
        return exports.InstancesConfApiFp(this.configuration).optionsInstancesConf(instanceId, options).then((request) => request(this.axios, this.basePath));
    }
    /**
     * Requests attribute instance changes. Please regard if you put back your instance from stopped to running it can take some minutes for ACS finishing booting.
     * @param {object} instanceId
     * @param {PutInstanceConf} putInstanceConf Body for Alf Instance Update. Currently only the update of the status is supported!
     * @param {*} [options] Override http request option.
     * @throws {RequiredError}
     * @memberof InstancesConfApi
     */
    updateInstanceConf(instanceId, putInstanceConf, options) {
        return exports.InstancesConfApiFp(this.configuration).updateInstanceConf(instanceId, putInstanceConf, options).then((request) => request(this.axios, this.basePath));
    }
}
exports.InstancesConfApi = InstancesConfApi;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBpLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXBpLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxvQkFBb0I7QUFDcEIsb0JBQW9CO0FBQ3BCOzs7Ozs7Ozs7O0dBVUc7OztBQUlILGlDQUFpRTtBQUNqRSx5REFBeUQ7QUFDekQsYUFBYTtBQUNiLGlDQUE0RjtBQXNCNUY7OztNQUdNO0FBQ04sSUFBWSwwQkFHWDtBQUhELFdBQVksMEJBQTBCO0lBQ2xDLGdEQUFrQixDQUFBO0lBQ2xCLGtEQUFvQixDQUFBO0FBQ3hCLENBQUMsRUFIVywwQkFBMEIsR0FBMUIsa0NBQTBCLEtBQTFCLGtDQUEwQixRQUdyQztBQUNEOzs7TUFHTTtBQUNOLElBQVksa0JBRVg7QUFGRCxXQUFZLGtCQUFrQjtJQUMxQiwyQ0FBcUIsQ0FBQTtBQUN6QixDQUFDLEVBRlcsa0JBQWtCLEdBQWxCLDBCQUFrQixLQUFsQiwwQkFBa0IsUUFFN0I7QUFlRDs7OztHQUlHO0FBQ0gsSUFBWSxjQUlYO0FBSkQsV0FBWSxjQUFjO0lBQ3RCLHFDQUFtQixDQUFBO0lBQ25CLDJDQUF5QixDQUFBO0lBQ3pCLHFDQUFtQixDQUFBO0FBQ3ZCLENBQUMsRUFKVyxjQUFjLEdBQWQsc0JBQWMsS0FBZCxzQkFBYyxRQUl6QjtBQXdMRDs7OztHQUlHO0FBQ0gsSUFBWSxNQU1YO0FBTkQsV0FBWSxNQUFNO0lBQ2QsNkJBQW1CLENBQUE7SUFDbkIsbUNBQXlCLENBQUE7SUFDekIsNkJBQW1CLENBQUE7SUFDbkIsNkJBQW1CLENBQUE7SUFDbkIsK0JBQXFCLENBQUE7QUFDekIsQ0FBQyxFQU5XLE1BQU0sR0FBTixjQUFNLEtBQU4sY0FBTSxRQU1qQjtBQW1FRDs7O0dBR0c7QUFDVSxRQUFBLDZCQUE2QixHQUFHLFVBQVUsYUFBNkI7SUFDaEYsT0FBTztRQUNIOzs7OztXQUtHO1FBQ0gsV0FBVyxFQUFFLEtBQUssRUFBRSxhQUFxQixFQUFFLFVBQWUsRUFBRSxFQUF3QixFQUFFO1lBQ2xG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QyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO0lBQ3BJLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSSxvQkFBb0IsQ0FBQyxhQUFxQixFQUFFLE9BQWE7UUFDNUQsT0FBTywwQkFBa0IsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsb0JBQW9CLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDckosQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSSxrQkFBa0IsQ0FBQyxhQUFxQixFQUFFLGVBQWdDLEVBQUUsT0FBYTtRQUM1RixPQUFPLDBCQUFrQixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDcEssQ0FBQztDQUNKO0FBbkVELDRDQW1FQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIHRzbGludDpkaXNhYmxlICovXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLyoqXG4gKiBUaGUgQWxmcmVzY28gUHJvdmlzaW9uZXIgXG4gKiBGaXJzdCBvZiBhbGwuIFRoYW5rIHlvdSBmb3Igam9pbmluZyB0aGUgY2xvc2VkIGFscGhhLiBZb3VyIGZlZWRiYWNrIHdpbGwgYmUgbXVjaCB3ZWxjb21lZC4gVGhlIEFsZnJlc2NvIFByb3Zpc2lvbmVyIGlzIGEgbWFuYWdlZCBzZXJ2aWNlIHRvIHByb3ZpZGUgQWxmcmVzY28gYmFja2VuZHMgd2l0aCBhbiBhd2Vzb21lIGV4cGVyaWVuY2UuIEZvciBtb3JlIGRldGFpbHMgcGxlYXNlIGxvb2sgaHR0cHM6Ly9tYXJ0aW5tdWVsbGVyLmRldi9hbGYtcHJvdmlzaW9uZXItZW5nLiAgQXMgdGhlIEFsZnJlc2NvIFByb3Zpc2lvbmVyIGlzIGEgbWFuYWdlZCBzZXJ2aWNlIHRvIHByb3ZpZGUgQWxmcmVzY28gYmFja2VuZHMgaXQgd291bGQgYmUgdmVyeSBncmVhdCBpZiB5b3UgY291bGQgZ2V0IGEgcm91Z2hseSBvdmVydmlldyBhYm91dCB3aGF0IHRoZSBBbGZyZXNjbyBwcm9kdWN0cyBhcmUgZm9yLiBJbiBteSBibG9nIHBvc3QgbWVudGlvbmVkIGFib3ZlIEkgZ2l2ZSB5b3UgYSByb3VnaCBvdmVydmlldyBhYm91dCB0aGUgQWxmcmVzY28gcHJvZHVjdHMgaW4gdGhlIENsb3NlZCBBbHBoYSBzZWN0aW9uLiAgQXMgdGhpcyBpcyBhbiBhbHBoYSB2ZXJzaW9uLCB5b3Ugd2lsbCBmaW5kIGZvciBzdXJlIGJ1Z3MuIFBsZWFzZSByZXBvcnQgdGhlbSBiYWNrIHRvIG1lIHVuZGVyOiBkYW1hZGRlbjg4QGdvb2dsZW1haWwuY29tICBOb3RpY2U6IEFzIHRoaXMgaXMgYW4gZWFybHkgdmVyc2lvbiBvZiB0aGUgQWxmcmVzY28gUHJvdmlzaW9uZXIgYSBsb3QgZmVhdHVyZXMgYXJlIG5vdCBpbXBsZW1lbnRlZCB5ZXQuICBJIGRlY2lkZWQgbm90IHRvIGJvdGhlciBtdWNoIHdpdGggdGhlIGNvbXBsZXhpdHkgb2YgYXV0aG9yaXphdGlvbiBhbmQgcGVybWlzc2lvbiB5ZXQuIEkgd2lsbCBhZGQgdGhvc2UgYXMgYSBsYXllci4gU28gZm9yIG5vdyBpdCBpcyBwb3NzaWJsZSB0byBhbHRlciByZXNvdXJjZXMgYmVsb25naW5nIHRvIGFuIG90aGVyIHVzZXIgdGhhbiB5b3UuIFBsZWFzZSBkb25cXCd0IGRvIHRoYXQgaWYgbm90IGFncmVlZCBhbmQgb25seSB1c2UgeW91ciB1c2VybmFtZSBmb3IgaW5zdGFuY2UgY3JlYXRpb24uIEFueXdheSB0aGUgZW5kcG9pbnRzIHRoZW1zZWxmIGFyZSBpbmRlZWQgc2VjdXJlZCB3aXRoIG9hdXRoMiBhbmQgYW4gaW1wbGljaXQgZ3JhbnQgd2hpY2ggaXMgcHV0IGluIHRoZSBBdXRob3JpemF0aW9uIGhlYWRlci4gU08gVVNJTkcgVEhFIEFVVEhPUklaRSBQT1BVUCBJTiBUSEUgVUkgSVNOXFwnVCBORUNFU1NBUlkuICBJZiB5b3Ugc2VlIHJldHVybmluZyBhIDQwMSB3aXRoIHRoZSBtZXNzYWdlIFxcXCJUaGUgaW5jb21pbmcgdG9rZW4gaGFzIGV4cGlyZWRcXFwiIGp1c3QgcmVmcmVzaCB0aGUgcGFnZSBhbmQgYSBuZXcgdG9rZW4gd2lsbCBiZSBnZW5lcmF0ZWQuICBGb3IgY29zdCBzYXZpbmcgcmVhc29ucyBwZXIgZGVmYXVsdCB0aGUgRUMyIGluc3RhbmNlIHdpbGwgc3RvcCB0aGVtc2VsZiBhZnRlciA0NSBtaW51dGVzIGFmdGVyIGNyZWF0aW9uIG9yIHVwZGF0ZS4gWW91IGNhbiBzdGFydCB0aGUgaW5zdGFuY2UgYWdhaW4gd2l0aCB1c2luZyB0aGUgUFVUIGVuZHBvaW50LiBBcyB3ZWxsIHlvdSBhcmUgb25seSBhbGxvd2VkIHRvIGNyZWF0ZSBhIG1heGltdW0gb2YgMiBpbnN0YW5jZXMgcGVyIHVzZXIuIFBsZWFzZSB0ZXJtaW5hdGUgbm90IHVzZWQgaW5zdGFuY2VzIHdpdGggdGhlIFBVVCBlbmRwb2ludCBhbmQgXFxcImV4cGVjdGVkU3RhdHVzXFxcIiA9IFxcXCJ0ZXJtaW5hdGVkXFxcIi4gIEhvdyB0byBzdGFydD86IFNpbXBseSBleHBsb3JlIHRoZSBwcm92aWRlZCBlbmRwb2ludHMgaW4gdGhlIG5leHQgc2VjdGlvbi4gVGhlIGVuZHBvaW50cyBpbiB0aGUgdGFnIGdyb3VwIG5hbWVkIGluc3RhbmNlcyBhcmUgc2hvd2luZyB5b3VyIC8gYWxsIGV4aXN0ZW50IEFsZnJlc2NvIEluc3Rhbnplcy4gVGhlIGdyb3VwIHRhZyBuYW1lZCBpbnN0YW5jZXMtY29uZiBoZWxwcyB0byByZXF1ZXN0IGFsZnJlc2NvIGluc3RhbmNlcyBvciBhbHRlciB0aGVtLiBGb3IgYSBzdGFydGVyIHlvdSBjb3VsZCB1c2UgdGhlIFBPU1QgRW5kcG9pbnQgdG8gcmVxdWVzdCB0aGUgY3JlYXRpb24gb2YgYW4gQWxmcmVzY28gaW5zdGFuei4gVGhhbiBjaGVjayB5b3VyIHJlcXVlc3Qgd2l0aCB0aGUgR0VUIGVuZHBvaW50cyBpbiB0aGUgaW5zdGFuY2UtY29uZiB0YWcgZ3JvdXAuIElmIHlvdXIgaW5zdGFuY2UgcmVxdWVzdCB3YXMgZ3JhbnRlZCB5b3Ugd2lsbCBmaW5kIHlvdXIgaW5zdGFueiBpbiB0aGUgaW5zdGFuY2VzIHRhZyBncm91cC4gUGxlYXNlIHJlZ2FyZCB0aGF0IHRoZSBhbGZyZXNjbyB1cmwgd2lsbCBiZSBhdmFpbGFibGUgYWZ0ZXIgYWJvdXQgMyBtaW51dGVzIGFzIGl0IHRha2VzIGEgYml0IGZvciBBQ1MgdG8gYm9vdCBzdWNjZXNzZnVsbHkuIEFmdGVyIHRoYXQgL3NoYXJlIC9hbGZyZXNjbyBhbmQgQUNBIC8gd2lsbCBiZSByZWFjaGFibGUgb24gdGhlIHVybCBzaW1pbGFyIGxvb2tpbmcgdG8gaWFiMTIuaS5hbGZwcm8ubmV0IC4gIEltcGxlbWVudGVkIGZlYXR1cmVzOiAgICogU3RhcnQsIFN0b3BwaW5nIGFuZCBUZXJtaW5hdGluZyBvZiBBbGZyZXNjbyBpbnN0YW5jZXMgICAqIEFjY2Vzc2luZyBBQ0EsIFNoYXJlIGFuZCBBbGZyZXNjbyBVcmxzIChtb3JlIGRldGFpbHMgbG9vayBmb3IgdGhlIHVybCBwcm9wZXJ0eSBkZWZpbml0aW9uIGJlbG93KSAgICogQ29zdCBTYXZpbmcgZmVhdHVyZSBmb3Igc3RvcHBpbmcgdGhlIGluc3RhbmNlcyBhZnRlciA0NSBtaW51dGVzICAgKiBBc3luY2hyb25hY2wgY29tbXVuaWNhdGlvbiB3aXRoIHRoZSBBbGZyZXNjbyBQcm92aXNpb25lciBzZXJ2ZXIgICAqIHVzaW5nIHRoZSBhdXRoZW50aWNhdGVkIHVzZXJuYW1lIGFzIHVzZXJJZCBmb3IgY29udmVuaWVuY2UgIFBsYW5uZWQgZmVhdHVyZXMgaW4gbmVhciBmdXR1cmU6ICAgKiBTdGF0dXMgZW5kcG9pbnQgZm9yIGluc3RhbmNlIGNyZWF0aW9uIHByb2dyZXNzICAgKiBBZGRpbmcgYW4gQXV0byBTY2FsaW5nIGluIGZyb250IG9mIHRoZSBlYzIgaW1hZ2UgZm9yIGF1dG9zZWxmIGhlYWxpbmcgYW5kIGEgaGVhbHRoIGNoZWNrIGlmIEFDUyBpcyBmaW5pc2hlZCBib290aW5nIGFuZCByZWFkeSAgICogU1NMIGVuY3J5cHRpb24uIEN1cnJlbnRseSB0aGVyZSBpcyBubyBIVFRQUyBjb25maWd1cmVkIHdpdGggdGhlIFByb3h5IGluIGZyb250IG9mIGVhY2ggQWxmcmVzY28gaW5zdGFueiBwcm92aXNpb25lZCBieSB0aGUgUHJvdmlzaW9uZXIuIFNvIGJlIGNhdXRpb3VzIHRvIG5vdCBzdG9yZSBzZW5zaWJsZSBkYXRhISAgICogRW1haWwgbm90aWZpY2F0aW9uLiBJIHBsYW4gdG8gc2VuZCBhbiBlbWFpbCB3aGVuIHlvdXIgQWxmcmVzY28gSW5zdGFueiBpcyByZWFkeS4gQnV0IGZvciBub3cgeW91IG5lZWQgdG8gY2hlY2sgdGhlIHByb2dyZXNzIG9uIHRoZSBHRVQgL2luc3RhbmNlcy1jb25mIGVuZHBvaW50IGFuZCB0aGUgaW5mbyBwcm9wZXJ0eS4gIFBsYW5uZWQgZmVhdHVyZXMgaW4gbW9yZSBkaXN0YW5jZSBmdXR1cmU6ICAgKiBTdG9wcGluZyBpbnN0YW5jZXMgYWZ0ZXIgaW5hY3Rpdml0eSBhbmQgbm90IHRoZSBzdGF0aWMgNDUgbWludXRlcy4gICAqIFBvdGVudGlhbGx5IExvYWQgQmFsYW5jZXIgaW4gZnJvbnQgdG8gZHJpdmUgbXVsdGlwbGUgaW5zdGFuY2VzIGZvciBiaWdnZXIgdXNlIGNhc2VzICBBZ2FpbiB0aGFuayB5b3Ugc28gbXVjaCBmb3IgdGVzdGluZyB0aGUgQWxmcmVzY28gUHJvdmlzaW9uZXIuIEFueSBmZWVkYmFjayBpcyBtdWNoIHdlbGNvbWVkISBQbGVhc2UgbGV0IG1lIGtub3cgb24gZGFtYWRkZW44OEBnb29nbGVtYWlsLmNvbSAuIFxuICpcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBPcGVuQVBJIGRvY3VtZW50OiAxLjAuM1xuICogXG4gKlxuICogTk9URTogVGhpcyBjbGFzcyBpcyBhdXRvIGdlbmVyYXRlZCBieSBPcGVuQVBJIEdlbmVyYXRvciAoaHR0cHM6Ly9vcGVuYXBpLWdlbmVyYXRvci50ZWNoKS5cbiAqIGh0dHBzOi8vb3BlbmFwaS1nZW5lcmF0b3IudGVjaFxuICogRG8gbm90IGVkaXQgdGhlIGNsYXNzIG1hbnVhbGx5LlxuICovXG5cblxuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9IGZyb20gJy4vY29uZmlndXJhdGlvbic7XG5pbXBvcnQgZ2xvYmFsQXhpb3MsIHsgQXhpb3NQcm9taXNlLCBBeGlvc0luc3RhbmNlIH0gZnJvbSAnYXhpb3MnO1xuLy8gU29tZSBpbXBvcnRzIG5vdCB1c2VkIGRlcGVuZGluZyBvbiB0ZW1wbGF0ZSBjb25kaXRpb25zXG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgeyBCQVNFX1BBVEgsIENPTExFQ1RJT05fRk9STUFUUywgUmVxdWVzdEFyZ3MsIEJhc2VBUEksIFJlcXVpcmVkRXJyb3IgfSBmcm9tICcuL2Jhc2UnO1xuXG4vKipcbiAqIFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBBbGZUeXBlXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQWxmVHlwZSB7XG4gICAgLyoqXG4gICAgICogU3VwcG9ydGVkIEVjMiBJbnN0YW5jZSBUeXBlLiBTdXBwb3J0ZWQgYXJlOiB0Mi5sYXJnZSAtIDIgQ1BVLCA4IEdCIFJBTSB0Mi54bGFyZ2UgLSA0IENQVSwgMTYgR0IgUkFNIFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG1lbWJlcm9mIEFsZlR5cGVcbiAgICAgKi9cbiAgICBlYzJJbnN0YW5jZVR5cGU6IEFsZlR5cGVFYzJJbnN0YW5jZVR5cGVFbnVtO1xuICAgIC8qKlxuICAgICAqIE5hbWUgb2Ygc3VwcG9ydGVkIEFsZnJlc2NvIERvY2tlciBDb21wb3NlIERlcGxveW1lbnQgZGVwbG95ZWQgd2l0aCB0aGUgQWxmcmVzY28gaW5zdGFsbGVyLiBhbGYtZWMtMSA6IEFDUyA2LjIgQ29tbXVuaXR5LCBBQ0EgXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgQWxmVHlwZVxuICAgICAqL1xuICAgIGdpdFJlcG86IEFsZlR5cGVHaXRSZXBvRW51bTtcbn1cblxuLyoqXG4gICAgKiBAZXhwb3J0XG4gICAgKiBAZW51bSB7c3RyaW5nfVxuICAgICovXG5leHBvcnQgZW51bSBBbGZUeXBlRWMySW5zdGFuY2VUeXBlRW51bSB7XG4gICAgTGFyZ2UgPSAndDIubGFyZ2UnLFxuICAgIFhsYXJnZSA9ICd0Mi54bGFyZ2UnXG59XG4vKipcbiAgICAqIEBleHBvcnRcbiAgICAqIEBlbnVtIHtzdHJpbmd9XG4gICAgKi9cbmV4cG9ydCBlbnVtIEFsZlR5cGVHaXRSZXBvRW51bSB7XG4gICAgQWxmRWMyMSA9ICdhbGYtZWMyLTEnXG59XG5cbi8qKlxuICogXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEF1dGhFcnJvclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhFcnJvciB7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgQXV0aEVycm9yXG4gICAgICovXG4gICAgbWVzc2FnZTogc3RyaW5nO1xufVxuLyoqXG4gKiBUaGUgc3RhdGUgeW91IGFyZSBhbGxvdyB0byBwdXQgeW91ciBpbnN0YW5jZSBpbi4gV2FybmluZyBwdXR0aW5nIGluc3RhbmNlcyBpbnRvIHRlcm1pbmF0ZWQgd2lsbCBkZWxldGUgdGhlIGluc3RhbmNlLWNvbmYgYW5kIGluc3RhbmNlIVxuICogQGV4cG9ydFxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGVudW0gRXhwZWN0ZWRTdGF0dXMge1xuICAgIFJ1bm5pbmcgPSAncnVubmluZycsXG4gICAgVGVybWluYXRlZCA9ICd0ZXJtaW5hdGVkJyxcbiAgICBTdG9wcGVkID0gJ3N0b3BwZWQnXG59XG5cbi8qKlxuICogXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEZvdW5kRXJyb3JcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGb3VuZEVycm9yIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBGb3VuZEVycm9yXG4gICAgICovXG4gICAgbWVzc2FnZTogc3RyaW5nO1xufVxuLyoqXG4gKiBcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgSW5zdGFuY2VcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJbnN0YW5jZSB7XG4gICAgLyoqXG4gICAgICogVXNlciBJbnN0YW5jZSBJZGVudGlmaWVyIGNyZWF0ZWQgd2l0aCBub2RlIHV1aWQuIENvbnNpc3RzIG9mIDUgY2hhcmFjdGVycyFcbiAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAqIEBtZW1iZXJvZiBJbnN0YW5jZVxuICAgICAqL1xuICAgIGFsZkluc3RhbmNlSWQ6IG9iamVjdDtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7U3RhdHVzfVxuICAgICAqIEBtZW1iZXJvZiBJbnN0YW5jZVxuICAgICAqL1xuICAgIHN0YXR1czogU3RhdHVzO1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtJbnN0YW5jZUFkbWluQ3JlZGVudGlhbHN9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlXG4gICAgICovXG4gICAgYWRtaW5DcmVkZW50aWFsczogSW5zdGFuY2VBZG1pbkNyZWRlbnRpYWxzO1xuICAgIC8qKlxuICAgICAqIFRoZSBVcmwgdG8gYWNjZXNzIEFDQS4gQ3VycmVudGx5IG9ubHkgaHR0cCBpcyBzdXBwb3J0ZWQuIFVybHMgYXJlIEFDQSA9IC4uLyBTaGFyZSA9IC4uL3NoYXJlIEFsZnJlc2NvID0gLi4vYWxmcmVzY28gLiBJdCB0YWtlcyB1cCB0byAzIG1pbnV0ZXMgdW50aWwgdGhpcyB1cmwgYmVjb21lcyBhdmFpbGFibGUuIEluIGZ1dHVyZSBJIHBsYW4gdG8gaW1wbGVtZW50IGEgaGVhbHRoY2hlY2sgKHByb2JhYmx5IGxldmVyYWdpbmcgQVdTIEF1dG9TY2FsaW5nKSB0byBtYWtlIHRoZSByZWFkaW5lc3Mgb2YgQUNTIG1vcmUgZmVhc2VibGUuICBUaGUgcHJvcGFnYXRpb24gb2YgdGhlIEROUyBSZWNvcmQgbm9ybWFsbHkgdGFrZXMgYSBiaXQgbG9uZ2VyLiBBbHRlcm5hdGl2ZWx5IHlvdSBjYW4gdXNlIHRoZSBhd3NVcmwgdG8gYWNjZXNzIHlvdXIgaW5zdGFuY2UuIFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlXG4gICAgICovXG4gICAgdXJsPzogc3RyaW5nO1xuICAgIC8qKlxuICAgICAqIEFsdGVybmF0aXZlIHVybCBmb3IgdGhlIEFsZnJlc2NvIGluc3RhbmNlLiBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBJbnN0YW5jZVxuICAgICAqL1xuICAgIGF3c1VybD86IHN0cmluZztcbn1cbi8qKlxuICogXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIEluc3RhbmNlQWRtaW5DcmVkZW50aWFsc1xuICovXG5leHBvcnQgaW50ZXJmYWNlIEluc3RhbmNlQWRtaW5DcmVkZW50aWFscyB7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgSW5zdGFuY2VBZG1pbkNyZWRlbnRpYWxzXG4gICAgICovXG4gICAgdXNlck5hbWU6IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBJbnN0YW5jZUFkbWluQ3JlZGVudGlhbHNcbiAgICAgKi9cbiAgICBwYXNzd29yZDogc3RyaW5nO1xufVxuLyoqXG4gKiBcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgSW5zdGFuY2VDb25mXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdGFuY2VDb25mIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7QWxmVHlwZX1cbiAgICAgKiBAbWVtYmVyb2YgSW5zdGFuY2VDb25mXG4gICAgICovXG4gICAgYWxmVHlwZT86IEFsZlR5cGU7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge1RhZ3N9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlQ29uZlxuICAgICAqL1xuICAgIHRhZ3M/OiBUYWdzO1xuICAgIC8qKlxuICAgICAqIFNpbXBsZSB1c2VyIG5hbWUuIFBsZWFzZSB1c2UgeW91ciB1c2VyIG5hbWUgZnJvbSB0aGUgc3lzdGVtLlxuICAgICAqIEB0eXBlIHtvYmplY3R9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlQ29uZlxuICAgICAqL1xuICAgIHVzZXJJZDogb2JqZWN0O1xuICAgIC8qKlxuICAgICAqIFVzZXIgSW5zdGFuY2UgSWRlbnRpZmllciBjcmVhdGVkIHdpdGggbm9kZSB1dWlkLiBDb25zaXN0cyBvZiA1IGNoYXJhY3RlcnMhXG4gICAgICogQHR5cGUge29iamVjdH1cbiAgICAgKiBAbWVtYmVyb2YgSW5zdGFuY2VDb25mXG4gICAgICovXG4gICAgYWxmSW5zdGFuY2VJZDogb2JqZWN0O1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtFeHBlY3RlZFN0YXR1c31cbiAgICAgKiBAbWVtYmVyb2YgSW5zdGFuY2VDb25mXG4gICAgICovXG4gICAgZXhwZWN0ZWRTdGF0dXM6IEV4cGVjdGVkU3RhdHVzO1xufVxuLyoqXG4gKiBcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgSW5zdGFuY2VDb25mQWxsT2ZcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJbnN0YW5jZUNvbmZBbGxPZiB7XG4gICAgLyoqXG4gICAgICogVXNlciBJbnN0YW5jZSBJZGVudGlmaWVyIGNyZWF0ZWQgd2l0aCBub2RlIHV1aWQuIENvbnNpc3RzIG9mIDUgY2hhcmFjdGVycyFcbiAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAqIEBtZW1iZXJvZiBJbnN0YW5jZUNvbmZBbGxPZlxuICAgICAqL1xuICAgIGFsZkluc3RhbmNlSWQ6IG9iamVjdDtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7RXhwZWN0ZWRTdGF0dXN9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlQ29uZkFsbE9mXG4gICAgICovXG4gICAgZXhwZWN0ZWRTdGF0dXM6IEV4cGVjdGVkU3RhdHVzO1xufVxuLyoqXG4gKiBcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgTW9kZWxFcnJvclxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG1lbWJlcm9mIE1vZGVsRXJyb3JcbiAgICAgKi9cbiAgICBtZXNzYWdlOiBzdHJpbmc7XG59XG4vKipcbiAqIFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBOZXdJbnN0YW5jZUNvbmZcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBOZXdJbnN0YW5jZUNvbmYge1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtBbGZUeXBlfVxuICAgICAqIEBtZW1iZXJvZiBOZXdJbnN0YW5jZUNvbmZcbiAgICAgKi9cbiAgICBhbGZUeXBlPzogQWxmVHlwZTtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7VGFnc31cbiAgICAgKiBAbWVtYmVyb2YgTmV3SW5zdGFuY2VDb25mXG4gICAgICovXG4gICAgdGFncz86IFRhZ3M7XG4gICAgLyoqXG4gICAgICogU2ltcGxlIHVzZXIgbmFtZS4gUGxlYXNlIHVzZSB5b3VyIHVzZXIgbmFtZSBmcm9tIHRoZSBzeXN0ZW0uXG4gICAgICogQHR5cGUge29iamVjdH1cbiAgICAgKiBAbWVtYmVyb2YgTmV3SW5zdGFuY2VDb25mXG4gICAgICovXG4gICAgdXNlcklkOiBvYmplY3Q7XG59XG4vKipcbiAqIFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBQdXRJbnN0YW5jZUNvbmZcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQdXRJbnN0YW5jZUNvbmYge1xuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEB0eXBlIHtFeHBlY3RlZFN0YXR1c31cbiAgICAgKiBAbWVtYmVyb2YgUHV0SW5zdGFuY2VDb25mXG4gICAgICovXG4gICAgZXhwZWN0ZWRTdGF0dXM/OiBFeHBlY3RlZFN0YXR1cztcbiAgICAvKipcbiAgICAgKiBTaW1wbGUgdXNlciBuYW1lLiBQbGVhc2UgdXNlIHlvdXIgdXNlciBuYW1lIGZyb20gdGhlIHN5c3RlbS5cbiAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAqIEBtZW1iZXJvZiBQdXRJbnN0YW5jZUNvbmZcbiAgICAgKi9cbiAgICB1c2VySWQ6IG9iamVjdDtcbn1cbi8qKlxuICogU2hvd3MgdGhlIGN1cnJlbnQgc3RhdGUuIEV2ZW4gaWYgeW91ciBpbnN0YW5jZSBpcyBpbiB0aGUgcnVubmluZyBzdGF0ZSBpdCBtaWdodCB0YWtlIHNvbWUgbWludXRlcyB1bnRpbCB0aGUgcHJvdmlkZWQgdXJsIGlzIHJlYWNoYWJsZS5cbiAqIEBleHBvcnRcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBlbnVtIFN0YXR1cyB7XG4gICAgUnVubmluZyA9ICdydW5uaW5nJyxcbiAgICBUZXJtaW5hdGVkID0gJ3Rlcm1pbmF0ZWQnLFxuICAgIFN0b3BwZWQgPSAnc3RvcHBlZCcsXG4gICAgUGVuZGluZyA9ICdwZW5kaW5nJyxcbiAgICBTdG9wcGluZyA9ICdzdG9wcGluZydcbn1cblxuLyoqXG4gKiBUYWdzLiBZb3UgY2FuIGFkZCBtb3JlIHRhZ3MgaWYgeW91IHdhbnQuIEZvciBleGFtcGxlIFxcXCJub3RpY2VcXFwiIDogXFxcIlRoYXRzIGFuIGluc3RhbmNlIGZvciBCb2JcXFwiXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFRhZ3NcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUYWdzIHtcbiAgICAvKipcbiAgICAgKiBBIE5hbWUgd2hpY2ggd2lsbCBiZSBhdHRhY2hlZCBhcyBOYW1lIFRhZyB0byB0aGUgRUMyIEluc3RhbmNlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgVGFnc1xuICAgICAqL1xuICAgIG5hbWU/OiBzdHJpbmc7XG59XG4vKipcbiAqIFxuICogQGV4cG9ydFxuICogQGludGVyZmFjZSBVcGRhdGVFcnJvclxuICovXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUVycm9yIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBVcGRhdGVFcnJvclxuICAgICAqL1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7SW5zdGFuY2VDb25mfVxuICAgICAqIEBtZW1iZXJvZiBVcGRhdGVFcnJvclxuICAgICAqL1xuICAgIHNjaGVtYT86IEluc3RhbmNlQ29uZjtcbn1cbi8qKlxuICogXG4gKiBAZXhwb3J0XG4gKiBAaW50ZXJmYWNlIFVwZGF0ZUVycm9yQWxsT2ZcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBVcGRhdGVFcnJvckFsbE9mIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7SW5zdGFuY2VDb25mfVxuICAgICAqIEBtZW1iZXJvZiBVcGRhdGVFcnJvckFsbE9mXG4gICAgICovXG4gICAgc2NoZW1hPzogSW5zdGFuY2VDb25mO1xufVxuLyoqXG4gKiBcbiAqIEBleHBvcnRcbiAqIEBpbnRlcmZhY2UgVmFsaWRhdGlvbkVycm9yXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVmFsaWRhdGlvbkVycm9yIHtcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBtZW1iZXJvZiBWYWxpZGF0aW9uRXJyb3JcbiAgICAgKi9cbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyb2YgVmFsaWRhdGlvbkVycm9yXG4gICAgICovXG4gICAgdmFsaWRhdGlvbkVycm9yczogc3RyaW5nO1xufVxuXG4vKipcbiAqIEluc3RhbmNlc0FwaSAtIGF4aW9zIHBhcmFtZXRlciBjcmVhdG9yXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBJbnN0YW5jZXNBcGlBeGlvc1BhcmFtQ3JlYXRvciA9IGZ1bmN0aW9uIChjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIGRldGFpbHMgYWJvdXQgYSBzcGVjaWZpYyBhbGZJbnN0YW5jZUlkLiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGFsZkluc3RhbmNlSWQgXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBnZXRJbnN0YW5jZTogYXN5bmMgKGFsZkluc3RhbmNlSWQ6IG9iamVjdCwgb3B0aW9uczogYW55ID0ge30pOiBQcm9taXNlPFJlcXVlc3RBcmdzPiA9PiB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdhbGZJbnN0YW5jZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGlmIChhbGZJbnN0YW5jZUlkID09PSBudWxsIHx8IGFsZkluc3RhbmNlSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdhbGZJbnN0YW5jZUlkJywnUmVxdWlyZWQgcGFyYW1ldGVyIGFsZkluc3RhbmNlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbnN0YW5jZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvaW5zdGFuY2VzL3thbGZJbnN0YW5jZUlkfWBcbiAgICAgICAgICAgICAgICAucmVwbGFjZShgeyR7XCJhbGZJbnN0YW5jZUlkXCJ9fWAsIGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYWxmSW5zdGFuY2VJZCkpKTtcbiAgICAgICAgICAgIC8vIHVzZSBkdW1teSBiYXNlIFVSTCBzdHJpbmcgYmVjYXVzZSB0aGUgVVJMIGNvbnN0cnVjdG9yIG9ubHkgYWNjZXB0cyBhYnNvbHV0ZSBVUkxzLlxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJVcmxPYmogPSBuZXcgVVJMKGxvY2FsVmFyUGF0aCwgJ2h0dHBzOi8vZXhhbXBsZS5jb20nKTtcbiAgICAgICAgICAgIGxldCBiYXNlT3B0aW9ucztcbiAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYmFzZU9wdGlvbnMgPSBjb25maWd1cmF0aW9uLmJhc2VPcHRpb25zO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclJlcXVlc3RPcHRpb25zID0geyBtZXRob2Q6ICdHRVQnLCAuLi5iYXNlT3B0aW9ucywgLi4ub3B0aW9uc307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9IGFzIGFueTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fSBhcyBhbnk7XG5cblxuICAgIFxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iai5zZWFyY2gpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbG9jYWxWYXJRdWVyeVBhcmFtZXRlcikge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoa2V5LCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucy5xdWVyeSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoa2V5LCBvcHRpb25zLnF1ZXJ5W2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJVcmxPYmouc2VhcmNoID0gKG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlQYXJhbWV0ZXJzKSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IHsuLi5sb2NhbFZhckhlYWRlclBhcmFtZXRlciwgLi4uaGVhZGVyc0Zyb21CYXNlT3B0aW9ucywgLi4ub3B0aW9ucy5oZWFkZXJzfTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGxvY2FsVmFyVXJsT2JqLnBhdGhuYW1lICsgbG9jYWxWYXJVcmxPYmouc2VhcmNoICsgbG9jYWxWYXJVcmxPYmouaGFzaCxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgZGV0YWlscyBhYm91dCBhbGwgcnVubmluZyBBbGZyZXNjbyBpbnN0YW5jZXMuIE5vdGljZSBhcyB0aGVyZSBpcyBubyBwZXJtaXNzaW9uIGNvbnRleHQgaW1wbGVtZW50ZWQgeWV0IHlvdSBjYW4gdmlldyBhbGwgLyBzcGVjaWZpYyBpbnN0YW5jZXMgd2l0aCBsZWF2aW5nIG91dCB0aGUgdXNlcklkIHBhcmFtZXRlciBvZGVyIHRha2UgYSB1c2VySWQgZnJvbSBhbm90aGVyIHVzZXIuIFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gW3VzZXJJZF0gVXNlciBpZCBRdWVyeSBQYXJhbWV0ZXIuIFBsZWFzZSB1c2UgeW91IHVzZXIgbmFtZSBmcm9tIHRoZSBzeXN0ZW0uXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBnZXRJbnN0YW5jZXM6IGFzeW5jICh1c2VySWQ/OiBvYmplY3QsIG9wdGlvbnM6IGFueSA9IHt9KTogUHJvbWlzZTxSZXF1ZXN0QXJncz4gPT4ge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbnN0YW5jZXNgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCAnaHR0cHM6Ly9leGFtcGxlLmNvbScpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSB7IG1ldGhvZDogJ0dFVCcsIC4uLmJhc2VPcHRpb25zLCAuLi5vcHRpb25zfTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge30gYXMgYW55O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9IGFzIGFueTtcblxuICAgICAgICAgICAgaWYgKHVzZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxWYXJRdWVyeVBhcmFtZXRlclsndXNlcklkJ10gPSB1c2VySWQ7XG4gICAgICAgICAgICB9XG5cblxuICAgIFxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iai5zZWFyY2gpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbG9jYWxWYXJRdWVyeVBhcmFtZXRlcikge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoa2V5LCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucy5xdWVyeSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoa2V5LCBvcHRpb25zLnF1ZXJ5W2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJVcmxPYmouc2VhcmNoID0gKG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlQYXJhbWV0ZXJzKSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IHsuLi5sb2NhbFZhckhlYWRlclBhcmFtZXRlciwgLi4uaGVhZGVyc0Zyb21CYXNlT3B0aW9ucywgLi4ub3B0aW9ucy5oZWFkZXJzfTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGxvY2FsVmFyVXJsT2JqLnBhdGhuYW1lICsgbG9jYWxWYXJVcmxPYmouc2VhcmNoICsgbG9jYWxWYXJVcmxPYmouaGFzaCxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gYWxmSW5zdGFuY2VJZCBcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIG9wdGlvbnNJbnN0YW5jZTogYXN5bmMgKGFsZkluc3RhbmNlSWQ6IG9iamVjdCwgb3B0aW9uczogYW55ID0ge30pOiBQcm9taXNlPFJlcXVlc3RBcmdzPiA9PiB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdhbGZJbnN0YW5jZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGlmIChhbGZJbnN0YW5jZUlkID09PSBudWxsIHx8IGFsZkluc3RhbmNlSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdhbGZJbnN0YW5jZUlkJywnUmVxdWlyZWQgcGFyYW1ldGVyIGFsZkluc3RhbmNlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBvcHRpb25zSW5zdGFuY2UuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2luc3RhbmNlcy97YWxmSW5zdGFuY2VJZH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiYWxmSW5zdGFuY2VJZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGFsZkluc3RhbmNlSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsICdodHRwczovL2V4YW1wbGUuY29tJyk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnT1BUSU9OUycsIC4uLmJhc2VPcHRpb25zLCAuLi5vcHRpb25zfTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge30gYXMgYW55O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9IGFzIGFueTtcblxuXG4gICAgXG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLnNlYXJjaCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIG9wdGlvbnMucXVlcnlba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhclVybE9iai5zZWFyY2ggPSAobmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMpKS50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gey4uLmxvY2FsVmFySGVhZGVyUGFyYW1ldGVyLCAuLi5oZWFkZXJzRnJvbUJhc2VPcHRpb25zLCAuLi5vcHRpb25zLmhlYWRlcnN9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogbG9jYWxWYXJVcmxPYmoucGF0aG5hbWUgKyBsb2NhbFZhclVybE9iai5zZWFyY2ggKyBsb2NhbFZhclVybE9iai5oYXNoLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBvcHRpb25zSW5zdGFuY2VzOiBhc3luYyAob3B0aW9uczogYW55ID0ge30pOiBQcm9taXNlPFJlcXVlc3RBcmdzPiA9PiB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclBhdGggPSBgL2luc3RhbmNlc2A7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsICdodHRwczovL2V4YW1wbGUuY29tJyk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnT1BUSU9OUycsIC4uLmJhc2VPcHRpb25zLCAuLi5vcHRpb25zfTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge30gYXMgYW55O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9IGFzIGFueTtcblxuXG4gICAgXG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLnNlYXJjaCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIG9wdGlvbnMucXVlcnlba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhclVybE9iai5zZWFyY2ggPSAobmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMpKS50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gey4uLmxvY2FsVmFySGVhZGVyUGFyYW1ldGVyLCAuLi5oZWFkZXJzRnJvbUJhc2VPcHRpb25zLCAuLi5vcHRpb25zLmhlYWRlcnN9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogbG9jYWxWYXJVcmxPYmoucGF0aG5hbWUgKyBsb2NhbFZhclVybE9iai5zZWFyY2ggKyBsb2NhbFZhclVybE9iai5oYXNoLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH1cbn07XG5cbi8qKlxuICogSW5zdGFuY2VzQXBpIC0gZnVuY3Rpb25hbCBwcm9ncmFtbWluZyBpbnRlcmZhY2VcbiAqIEBleHBvcnRcbiAqL1xuZXhwb3J0IGNvbnN0IEluc3RhbmNlc0FwaUZwID0gZnVuY3Rpb24oY29uZmlndXJhdGlvbj86IENvbmZpZ3VyYXRpb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBkZXRhaWxzIGFib3V0IGEgc3BlY2lmaWMgYWxmSW5zdGFuY2VJZC4gXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbGZJbnN0YW5jZUlkIFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgYXN5bmMgZ2V0SW5zdGFuY2UoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCBvcHRpb25zPzogYW55KTogUHJvbWlzZTwoYXhpb3M/OiBBeGlvc0luc3RhbmNlLCBiYXNlUGF0aD86IHN0cmluZykgPT4gQXhpb3NQcm9taXNlPEluc3RhbmNlPj4ge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSBhd2FpdCBJbnN0YW5jZXNBcGlBeGlvc1BhcmFtQ3JlYXRvcihjb25maWd1cmF0aW9uKS5nZXRJbnN0YW5jZShhbGZJbnN0YW5jZUlkLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiAoYXhpb3M6IEF4aW9zSW5zdGFuY2UgPSBnbG9iYWxBeGlvcywgYmFzZVBhdGg6IHN0cmluZyA9IEJBU0VfUEFUSCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF4aW9zUmVxdWVzdEFyZ3MgPSB7Li4ubG9jYWxWYXJBeGlvc0FyZ3Mub3B0aW9ucywgdXJsOiBiYXNlUGF0aCArIGxvY2FsVmFyQXhpb3NBcmdzLnVybH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnJlcXVlc3QoYXhpb3NSZXF1ZXN0QXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBkZXRhaWxzIGFib3V0IGFsbCBydW5uaW5nIEFsZnJlc2NvIGluc3RhbmNlcy4gTm90aWNlIGFzIHRoZXJlIGlzIG5vIHBlcm1pc3Npb24gY29udGV4dCBpbXBsZW1lbnRlZCB5ZXQgeW91IGNhbiB2aWV3IGFsbCAvIHNwZWNpZmljIGluc3RhbmNlcyB3aXRoIGxlYXZpbmcgb3V0IHRoZSB1c2VySWQgcGFyYW1ldGVyIG9kZXIgdGFrZSBhIHVzZXJJZCBmcm9tIGFub3RoZXIgdXNlci4gXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbdXNlcklkXSBVc2VyIGlkIFF1ZXJ5IFBhcmFtZXRlci4gUGxlYXNlIHVzZSB5b3UgdXNlciBuYW1lIGZyb20gdGhlIHN5c3RlbS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGFzeW5jIGdldEluc3RhbmNlcyh1c2VySWQ/OiBvYmplY3QsIG9wdGlvbnM/OiBhbnkpOiBQcm9taXNlPChheGlvcz86IEF4aW9zSW5zdGFuY2UsIGJhc2VQYXRoPzogc3RyaW5nKSA9PiBBeGlvc1Byb21pc2U8QXJyYXk8SW5zdGFuY2U+Pj4ge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSBhd2FpdCBJbnN0YW5jZXNBcGlBeGlvc1BhcmFtQ3JlYXRvcihjb25maWd1cmF0aW9uKS5nZXRJbnN0YW5jZXModXNlcklkLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiAoYXhpb3M6IEF4aW9zSW5zdGFuY2UgPSBnbG9iYWxBeGlvcywgYmFzZVBhdGg6IHN0cmluZyA9IEJBU0VfUEFUSCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF4aW9zUmVxdWVzdEFyZ3MgPSB7Li4ubG9jYWxWYXJBeGlvc0FyZ3Mub3B0aW9ucywgdXJsOiBiYXNlUGF0aCArIGxvY2FsVmFyQXhpb3NBcmdzLnVybH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnJlcXVlc3QoYXhpb3NSZXF1ZXN0QXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbGZJbnN0YW5jZUlkIFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgYXN5bmMgb3B0aW9uc0luc3RhbmNlKGFsZkluc3RhbmNlSWQ6IG9iamVjdCwgb3B0aW9ucz86IGFueSk6IFByb21pc2U8KGF4aW9zPzogQXhpb3NJbnN0YW5jZSwgYmFzZVBhdGg/OiBzdHJpbmcpID0+IEF4aW9zUHJvbWlzZTx2b2lkPj4ge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSBhd2FpdCBJbnN0YW5jZXNBcGlBeGlvc1BhcmFtQ3JlYXRvcihjb25maWd1cmF0aW9uKS5vcHRpb25zSW5zdGFuY2UoYWxmSW5zdGFuY2VJZCwgb3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gKGF4aW9zOiBBeGlvc0luc3RhbmNlID0gZ2xvYmFsQXhpb3MsIGJhc2VQYXRoOiBzdHJpbmcgPSBCQVNFX1BBVEgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBheGlvc1JlcXVlc3RBcmdzID0gey4uLmxvY2FsVmFyQXhpb3NBcmdzLm9wdGlvbnMsIHVybDogYmFzZVBhdGggKyBsb2NhbFZhckF4aW9zQXJncy51cmx9O1xuICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5yZXF1ZXN0KGF4aW9zUmVxdWVzdEFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgYXN5bmMgb3B0aW9uc0luc3RhbmNlcyhvcHRpb25zPzogYW55KTogUHJvbWlzZTwoYXhpb3M/OiBBeGlvc0luc3RhbmNlLCBiYXNlUGF0aD86IHN0cmluZykgPT4gQXhpb3NQcm9taXNlPHZvaWQ+PiB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IGF3YWl0IEluc3RhbmNlc0FwaUF4aW9zUGFyYW1DcmVhdG9yKGNvbmZpZ3VyYXRpb24pLm9wdGlvbnNJbnN0YW5jZXMob3B0aW9ucyk7XG4gICAgICAgICAgICByZXR1cm4gKGF4aW9zOiBBeGlvc0luc3RhbmNlID0gZ2xvYmFsQXhpb3MsIGJhc2VQYXRoOiBzdHJpbmcgPSBCQVNFX1BBVEgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBheGlvc1JlcXVlc3RBcmdzID0gey4uLmxvY2FsVmFyQXhpb3NBcmdzLm9wdGlvbnMsIHVybDogYmFzZVBhdGggKyBsb2NhbFZhckF4aW9zQXJncy51cmx9O1xuICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5yZXF1ZXN0KGF4aW9zUmVxdWVzdEFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICB9XG59O1xuXG4vKipcbiAqIEluc3RhbmNlc0FwaSAtIGZhY3RvcnkgaW50ZXJmYWNlXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBJbnN0YW5jZXNBcGlGYWN0b3J5ID0gZnVuY3Rpb24gKGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uLCBiYXNlUGF0aD86IHN0cmluZywgYXhpb3M/OiBBeGlvc0luc3RhbmNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgZGV0YWlscyBhYm91dCBhIHNwZWNpZmljIGFsZkluc3RhbmNlSWQuIFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gYWxmSW5zdGFuY2VJZCBcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGdldEluc3RhbmNlKGFsZkluc3RhbmNlSWQ6IG9iamVjdCwgb3B0aW9ucz86IGFueSk6IEF4aW9zUHJvbWlzZTxJbnN0YW5jZT4ge1xuICAgICAgICAgICAgcmV0dXJuIEluc3RhbmNlc0FwaUZwKGNvbmZpZ3VyYXRpb24pLmdldEluc3RhbmNlKGFsZkluc3RhbmNlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIGRldGFpbHMgYWJvdXQgYWxsIHJ1bm5pbmcgQWxmcmVzY28gaW5zdGFuY2VzLiBOb3RpY2UgYXMgdGhlcmUgaXMgbm8gcGVybWlzc2lvbiBjb250ZXh0IGltcGxlbWVudGVkIHlldCB5b3UgY2FuIHZpZXcgYWxsIC8gc3BlY2lmaWMgaW5zdGFuY2VzIHdpdGggbGVhdmluZyBvdXQgdGhlIHVzZXJJZCBwYXJhbWV0ZXIgb2RlciB0YWtlIGEgdXNlcklkIGZyb20gYW5vdGhlciB1c2VyLiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IFt1c2VySWRdIFVzZXIgaWQgUXVlcnkgUGFyYW1ldGVyLiBQbGVhc2UgdXNlIHlvdSB1c2VyIG5hbWUgZnJvbSB0aGUgc3lzdGVtLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0SW5zdGFuY2VzKHVzZXJJZD86IG9iamVjdCwgb3B0aW9ucz86IGFueSk6IEF4aW9zUHJvbWlzZTxBcnJheTxJbnN0YW5jZT4+IHtcbiAgICAgICAgICAgIHJldHVybiBJbnN0YW5jZXNBcGlGcChjb25maWd1cmF0aW9uKS5nZXRJbnN0YW5jZXModXNlcklkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbGZJbnN0YW5jZUlkIFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9uc0luc3RhbmNlKGFsZkluc3RhbmNlSWQ6IG9iamVjdCwgb3B0aW9ucz86IGFueSk6IEF4aW9zUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgICAgICByZXR1cm4gSW5zdGFuY2VzQXBpRnAoY29uZmlndXJhdGlvbikub3B0aW9uc0luc3RhbmNlKGFsZkluc3RhbmNlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QoYXhpb3MsIGJhc2VQYXRoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIG9wdGlvbnNJbnN0YW5jZXMob3B0aW9ucz86IGFueSk6IEF4aW9zUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgICAgICByZXR1cm4gSW5zdGFuY2VzQXBpRnAoY29uZmlndXJhdGlvbikub3B0aW9uc0luc3RhbmNlcyhvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuXG4vKipcbiAqIEluc3RhbmNlc0FwaSAtIG9iamVjdC1vcmllbnRlZCBpbnRlcmZhY2VcbiAqIEBleHBvcnRcbiAqIEBjbGFzcyBJbnN0YW5jZXNBcGlcbiAqIEBleHRlbmRzIHtCYXNlQVBJfVxuICovXG5leHBvcnQgY2xhc3MgSW5zdGFuY2VzQXBpIGV4dGVuZHMgQmFzZUFQSSB7XG4gICAgLyoqXG4gICAgICogR2V0cyBkZXRhaWxzIGFib3V0IGEgc3BlY2lmaWMgYWxmSW5zdGFuY2VJZC4gXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFsZkluc3RhbmNlSWQgXG4gICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAqIEBtZW1iZXJvZiBJbnN0YW5jZXNBcGlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5zdGFuY2UoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCBvcHRpb25zPzogYW55KSB7XG4gICAgICAgIHJldHVybiBJbnN0YW5jZXNBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmdldEluc3RhbmNlKGFsZkluc3RhbmNlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgZGV0YWlscyBhYm91dCBhbGwgcnVubmluZyBBbGZyZXNjbyBpbnN0YW5jZXMuIE5vdGljZSBhcyB0aGVyZSBpcyBubyBwZXJtaXNzaW9uIGNvbnRleHQgaW1wbGVtZW50ZWQgeWV0IHlvdSBjYW4gdmlldyBhbGwgLyBzcGVjaWZpYyBpbnN0YW5jZXMgd2l0aCBsZWF2aW5nIG91dCB0aGUgdXNlcklkIHBhcmFtZXRlciBvZGVyIHRha2UgYSB1c2VySWQgZnJvbSBhbm90aGVyIHVzZXIuIFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbdXNlcklkXSBVc2VyIGlkIFF1ZXJ5IFBhcmFtZXRlci4gUGxlYXNlIHVzZSB5b3UgdXNlciBuYW1lIGZyb20gdGhlIHN5c3RlbS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlc0FwaVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRJbnN0YW5jZXModXNlcklkPzogb2JqZWN0LCBvcHRpb25zPzogYW55KSB7XG4gICAgICAgIHJldHVybiBJbnN0YW5jZXNBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmdldEluc3RhbmNlcyh1c2VySWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbGZJbnN0YW5jZUlkIFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgSW5zdGFuY2VzQXBpXG4gICAgICovXG4gICAgcHVibGljIG9wdGlvbnNJbnN0YW5jZShhbGZJbnN0YW5jZUlkOiBvYmplY3QsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIEluc3RhbmNlc0FwaUZwKHRoaXMuY29uZmlndXJhdGlvbikub3B0aW9uc0luc3RhbmNlKGFsZkluc3RhbmNlSWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgSW5zdGFuY2VzQXBpXG4gICAgICovXG4gICAgcHVibGljIG9wdGlvbnNJbnN0YW5jZXMob3B0aW9ucz86IGFueSkge1xuICAgICAgICByZXR1cm4gSW5zdGFuY2VzQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5vcHRpb25zSW5zdGFuY2VzKG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cbn1cblxuXG4vKipcbiAqIEluc3RhbmNlc0NvbmZBcGkgLSBheGlvcyBwYXJhbWV0ZXIgY3JlYXRvclxuICogQGV4cG9ydFxuICovXG5leHBvcnQgY29uc3QgSW5zdGFuY2VzQ29uZkFwaUF4aW9zUGFyYW1DcmVhdG9yID0gZnVuY3Rpb24gKGNvbmZpZ3VyYXRpb24/OiBDb25maWd1cmF0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYW4gQWxmcmVzY28gaW5zdGFuY2UgcmVxdWVzdC4gUGVyIHVzZXJJZCB5b3UgY2FuIG9ubHkgY3JlYXRlIG1heCAyIGluc3RhbmNlcyEgUGxlYXNlIGNoZWNrIGhvdyBtdWNoIHlvdSBhbHJlYWR5IGhhdmUgY3JlYXRlZCBhcyB5b3UgZG9uXFwndCBnZXQgYSB3YXJuaW5nIGhlcmUhICBBZnRlciB5b3VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IGFuIGluc3RhbmNlIHJlcXVlc3QgY2hlY2sgb3V0IHRoZSBHRVQgL2luc3RhbmNlc+KAiy97YWxmSW5zdGFuY2VJZH0gZW5kcG9pbnQgd2l0aCB5b3VyIGFsZkluc3RhbmNlSWQuICBQbGVhc2UgcmVnYXJkIHRoYXQgdGhlIGFsZnJlc2NvIGluc3RhbmNlIG5lZWRzIGFib3V0IDMgbWludXRlcyBmb3IgYmVlaW5nIHJlYWNoYWJsZS4gXG4gICAgICAgICAqIEBwYXJhbSB7TmV3SW5zdGFuY2VDb25mfSBuZXdJbnN0YW5jZUNvbmYgQm9keSBmb3IgQWxmIEluc3RhbmNlIENyZWF0ZS4gUGxlYXNlIGluc2VydCB5b3VyIHVzZXJuYW1lIGZvciB1c2VySWQuXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBhZGRJbnN0YW5jZUNvbmY6IGFzeW5jIChuZXdJbnN0YW5jZUNvbmY6IE5ld0luc3RhbmNlQ29uZiwgb3B0aW9uczogYW55ID0ge30pOiBQcm9taXNlPFJlcXVlc3RBcmdzPiA9PiB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICduZXdJbnN0YW5jZUNvbmYnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgaWYgKG5ld0luc3RhbmNlQ29uZiA9PT0gbnVsbCB8fCBuZXdJbnN0YW5jZUNvbmYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCduZXdJbnN0YW5jZUNvbmYnLCdSZXF1aXJlZCBwYXJhbWV0ZXIgbmV3SW5zdGFuY2VDb25mIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgYWRkSW5zdGFuY2VDb25mLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbnN0YW5jZXMtY29uZmA7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsICdodHRwczovL2V4YW1wbGUuY29tJyk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnUE9TVCcsIC4uLmJhc2VPcHRpb25zLCAuLi5vcHRpb25zfTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge30gYXMgYW55O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9IGFzIGFueTtcblxuXG4gICAgXG4gICAgICAgICAgICBsb2NhbFZhckhlYWRlclBhcmFtZXRlclsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG5cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UGFyYW1ldGVycyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMobG9jYWxWYXJVcmxPYmouc2VhcmNoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMuc2V0KGtleSwgbG9jYWxWYXJRdWVyeVBhcmFtZXRlcltrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMucXVlcnkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtZXRlcnMuc2V0KGtleSwgb3B0aW9ucy5xdWVyeVtrZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvY2FsVmFyVXJsT2JqLnNlYXJjaCA9IChuZXcgVVJMU2VhcmNoUGFyYW1zKHF1ZXJ5UGFyYW1ldGVycykpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBsZXQgaGVhZGVyc0Zyb21CYXNlT3B0aW9ucyA9IGJhc2VPcHRpb25zICYmIGJhc2VPcHRpb25zLmhlYWRlcnMgPyBiYXNlT3B0aW9ucy5oZWFkZXJzIDoge307XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSB7Li4ubG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIsIC4uLmhlYWRlcnNGcm9tQmFzZU9wdGlvbnMsIC4uLm9wdGlvbnMuaGVhZGVyc307XG4gICAgICAgICAgICBjb25zdCBuZWVkc1NlcmlhbGl6YXRpb24gPSAodHlwZW9mIG5ld0luc3RhbmNlQ29uZiAhPT0gXCJzdHJpbmdcIikgJiYgY29uZmlndXJhdGlvbi5pc0pzb25NaW1lKGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVyc1snQ29udGVudC1UeXBlJ10pO1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5kYXRhID0gIG5lZWRzU2VyaWFsaXphdGlvbiA/IEpTT04uc3RyaW5naWZ5KG5ld0luc3RhbmNlQ29uZiAhPT0gdW5kZWZpbmVkID8gbmV3SW5zdGFuY2VDb25mIDoge30pIDogKG5ld0luc3RhbmNlQ29uZiB8fCBcIlwiKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGxvY2FsVmFyVXJsT2JqLnBhdGhuYW1lICsgbG9jYWxWYXJVcmxPYmouc2VhcmNoICsgbG9jYWxWYXJVcmxPYmouaGFzaCxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgZGV0YWlscyBhYm91dCBhIHNwZWNpZmljIGFsZnJlc2NvIHJlcXVlc3QgY29uZmlndXJhdGlvbi4gXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbGZJbnN0YW5jZUlkIFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gdXNlcklkIFVzZXIgaWQgUXVlcnkgUGFyYW1ldGVyLiBQbGVhc2UgdXNlIHlvdSB1c2VyIG5hbWUgZnJvbSB0aGUgc3lzdGVtLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0SW5zdGFuY2VDb25mOiBhc3luYyAoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCB1c2VySWQ6IG9iamVjdCwgb3B0aW9uczogYW55ID0ge30pOiBQcm9taXNlPFJlcXVlc3RBcmdzPiA9PiB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdhbGZJbnN0YW5jZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGlmIChhbGZJbnN0YW5jZUlkID09PSBudWxsIHx8IGFsZkluc3RhbmNlSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdhbGZJbnN0YW5jZUlkJywnUmVxdWlyZWQgcGFyYW1ldGVyIGFsZkluc3RhbmNlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyBnZXRJbnN0YW5jZUNvbmYuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICd1c2VySWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgaWYgKHVzZXJJZCA9PT0gbnVsbCB8fCB1c2VySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCd1c2VySWQnLCdSZXF1aXJlZCBwYXJhbWV0ZXIgdXNlcklkIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgZ2V0SW5zdGFuY2VDb25mLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbnN0YW5jZXMtY29uZi97YWxmSW5zdGFuY2VJZH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiYWxmSW5zdGFuY2VJZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGFsZkluc3RhbmNlSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsICdodHRwczovL2V4YW1wbGUuY29tJyk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgLi4uYmFzZU9wdGlvbnMsIC4uLm9wdGlvbnN9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fSBhcyBhbnk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge30gYXMgYW55O1xuXG4gICAgICAgICAgICBpZiAodXNlcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyWyd1c2VySWQnXSA9IHVzZXJJZDtcbiAgICAgICAgICAgIH1cblxuXG4gICAgXG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLnNlYXJjaCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIG9wdGlvbnMucXVlcnlba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhclVybE9iai5zZWFyY2ggPSAobmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMpKS50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gey4uLmxvY2FsVmFySGVhZGVyUGFyYW1ldGVyLCAuLi5oZWFkZXJzRnJvbUJhc2VPcHRpb25zLCAuLi5vcHRpb25zLmhlYWRlcnN9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogbG9jYWxWYXJVcmxPYmoucGF0aG5hbWUgKyBsb2NhbFZhclVybE9iai5zZWFyY2ggKyBsb2NhbFZhclVybE9iai5oYXNoLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBkZXRhaWxzIGFib3V0IGFsbCByZXF1ZXN0ZWQgQWxmcmVzY28gaW5zdGFuY2VzLiBJZiB5b3Ugc2VlIGhlcmUgeW91ciByZXF1ZXN0ZWQgQWxmcmVzY28gaW5zdGFuY2UgaXQgaXMgbGlrZWx5IHRoYXQgaXQgd2FzIGNyZWF0ZWQgYWxyZWFkeS4gSG93ZXZlciBpdCBpcyBub3QgZ3VhcmVudGVkIGFzIG1pZ2h0IHlvdXIgbGltaXQgcGVyIHVzZXIgaXMgcmVhY2hlZCBvciBvdGhlciB0aGUgb3ZlcmFsbCBtYXhpbXVtIGxpbWl0IG9mIGluc3RhbmNlcyB3YXMgcmVhY2hlZC4gXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbdXNlcklkXSBVc2VyIGlkIFF1ZXJ5IFBhcmFtZXRlci4gUGxlYXNlIHVzZSB5b3UgdXNlciBuYW1lIGZyb20gdGhlIHN5c3RlbS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGdldEluc3RhbmNlQ29uZnM6IGFzeW5jICh1c2VySWQ/OiBvYmplY3QsIG9wdGlvbnM6IGFueSA9IHt9KTogUHJvbWlzZTxSZXF1ZXN0QXJncz4gPT4ge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbnN0YW5jZXMtY29uZmA7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsICdodHRwczovL2V4YW1wbGUuY29tJyk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnR0VUJywgLi4uYmFzZU9wdGlvbnMsIC4uLm9wdGlvbnN9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fSBhcyBhbnk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge30gYXMgYW55O1xuXG4gICAgICAgICAgICBpZiAodXNlcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyWyd1c2VySWQnXSA9IHVzZXJJZDtcbiAgICAgICAgICAgIH1cblxuXG4gICAgXG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLnNlYXJjaCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIG9wdGlvbnMucXVlcnlba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhclVybE9iai5zZWFyY2ggPSAobmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMpKS50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gey4uLmxvY2FsVmFySGVhZGVyUGFyYW1ldGVyLCAuLi5oZWFkZXJzRnJvbUJhc2VPcHRpb25zLCAuLi5vcHRpb25zLmhlYWRlcnN9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogbG9jYWxWYXJVcmxPYmoucGF0aG5hbWUgKyBsb2NhbFZhclVybE9iai5zZWFyY2ggKyBsb2NhbFZhclVybE9iai5oYXNoLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBvcHRpb25JbnN0YW5jZUNvbmY6IGFzeW5jIChvcHRpb25zOiBhbnkgPSB7fSk6IFByb21pc2U8UmVxdWVzdEFyZ3M+ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUGF0aCA9IGAvaW5zdGFuY2VzLWNvbmZgO1xuICAgICAgICAgICAgLy8gdXNlIGR1bW15IGJhc2UgVVJMIHN0cmluZyBiZWNhdXNlIHRoZSBVUkwgY29uc3RydWN0b3Igb25seSBhY2NlcHRzIGFic29sdXRlIFVSTHMuXG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclVybE9iaiA9IG5ldyBVUkwobG9jYWxWYXJQYXRoLCAnaHR0cHM6Ly9leGFtcGxlLmNvbScpO1xuICAgICAgICAgICAgbGV0IGJhc2VPcHRpb25zO1xuICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBiYXNlT3B0aW9ucyA9IGNvbmZpZ3VyYXRpb24uYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMgPSB7IG1ldGhvZDogJ09QVElPTlMnLCAuLi5iYXNlT3B0aW9ucywgLi4ub3B0aW9uc307XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckhlYWRlclBhcmFtZXRlciA9IHt9IGFzIGFueTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXIgPSB7fSBhcyBhbnk7XG5cblxuICAgIFxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iai5zZWFyY2gpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbG9jYWxWYXJRdWVyeVBhcmFtZXRlcikge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoa2V5LCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucy5xdWVyeSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoa2V5LCBvcHRpb25zLnF1ZXJ5W2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJVcmxPYmouc2VhcmNoID0gKG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlQYXJhbWV0ZXJzKSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IHsuLi5sb2NhbFZhckhlYWRlclBhcmFtZXRlciwgLi4uaGVhZGVyc0Zyb21CYXNlT3B0aW9ucywgLi4ub3B0aW9ucy5oZWFkZXJzfTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1cmw6IGxvY2FsVmFyVXJsT2JqLnBhdGhuYW1lICsgbG9jYWxWYXJVcmxPYmouc2VhcmNoICsgbG9jYWxWYXJVcmxPYmouaGFzaCxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBsb2NhbFZhclJlcXVlc3RPcHRpb25zLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gYWxmSW5zdGFuY2VJZCBcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIG9wdGlvbnNJbnN0YW5jZXNDb25mOiBhc3luYyAoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCBvcHRpb25zOiBhbnkgPSB7fSk6IFByb21pc2U8UmVxdWVzdEFyZ3M+ID0+IHtcbiAgICAgICAgICAgIC8vIHZlcmlmeSByZXF1aXJlZCBwYXJhbWV0ZXIgJ2FsZkluc3RhbmNlSWQnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgaWYgKGFsZkluc3RhbmNlSWQgPT09IG51bGwgfHwgYWxmSW5zdGFuY2VJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJlcXVpcmVkRXJyb3IoJ2FsZkluc3RhbmNlSWQnLCdSZXF1aXJlZCBwYXJhbWV0ZXIgYWxmSW5zdGFuY2VJZCB3YXMgbnVsbCBvciB1bmRlZmluZWQgd2hlbiBjYWxsaW5nIG9wdGlvbnNJbnN0YW5jZXNDb25mLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbnN0YW5jZXMtY29uZi97YWxmSW5zdGFuY2VJZH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiYWxmSW5zdGFuY2VJZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGFsZkluc3RhbmNlSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsICdodHRwczovL2V4YW1wbGUuY29tJyk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnT1BUSU9OUycsIC4uLmJhc2VPcHRpb25zLCAuLi5vcHRpb25zfTtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyID0ge30gYXMgYW55O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJRdWVyeVBhcmFtZXRlciA9IHt9IGFzIGFueTtcblxuXG4gICAgXG4gICAgICAgICAgICBjb25zdCBxdWVyeVBhcmFtZXRlcnMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKGxvY2FsVmFyVXJsT2JqLnNlYXJjaCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIGxvY2FsVmFyUXVlcnlQYXJhbWV0ZXJba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzLnNldChrZXksIG9wdGlvbnMucXVlcnlba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhbFZhclVybE9iai5zZWFyY2ggPSAobmV3IFVSTFNlYXJjaFBhcmFtcyhxdWVyeVBhcmFtZXRlcnMpKS50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IGhlYWRlcnNGcm9tQmFzZU9wdGlvbnMgPSBiYXNlT3B0aW9ucyAmJiBiYXNlT3B0aW9ucy5oZWFkZXJzID8gYmFzZU9wdGlvbnMuaGVhZGVycyA6IHt9O1xuICAgICAgICAgICAgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0gey4uLmxvY2FsVmFySGVhZGVyUGFyYW1ldGVyLCAuLi5oZWFkZXJzRnJvbUJhc2VPcHRpb25zLCAuLi5vcHRpb25zLmhlYWRlcnN9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogbG9jYWxWYXJVcmxPYmoucGF0aG5hbWUgKyBsb2NhbFZhclVybE9iai5zZWFyY2ggKyBsb2NhbFZhclVybE9iai5oYXNoLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogUmVxdWVzdHMgYXR0cmlidXRlIGluc3RhbmNlIGNoYW5nZXMuIFBsZWFzZSByZWdhcmQgaWYgeW91IHB1dCBiYWNrIHlvdXIgaW5zdGFuY2UgZnJvbSBzdG9wcGVkIHRvIHJ1bm5pbmcgaXQgY2FuIHRha2Ugc29tZSBtaW51dGVzIGZvciBBQ1MgZmluaXNoaW5nIGJvb3RpbmcuIFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gYWxmSW5zdGFuY2VJZCBcbiAgICAgICAgICogQHBhcmFtIHtQdXRJbnN0YW5jZUNvbmZ9IHB1dEluc3RhbmNlQ29uZiBCb2R5IGZvciBBbGYgSW5zdGFuY2UgVXBkYXRlLiBDdXJyZW50bHkgb25seSB0aGUgdXBkYXRlIG9mIHRoZSBzdGF0dXMgaXMgc3VwcG9ydGVkIVxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgdXBkYXRlSW5zdGFuY2VDb25mOiBhc3luYyAoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCBwdXRJbnN0YW5jZUNvbmY6IFB1dEluc3RhbmNlQ29uZiwgb3B0aW9uczogYW55ID0ge30pOiBQcm9taXNlPFJlcXVlc3RBcmdzPiA9PiB7XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdhbGZJbnN0YW5jZUlkJyBpcyBub3QgbnVsbCBvciB1bmRlZmluZWRcbiAgICAgICAgICAgIGlmIChhbGZJbnN0YW5jZUlkID09PSBudWxsIHx8IGFsZkluc3RhbmNlSWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdhbGZJbnN0YW5jZUlkJywnUmVxdWlyZWQgcGFyYW1ldGVyIGFsZkluc3RhbmNlSWQgd2FzIG51bGwgb3IgdW5kZWZpbmVkIHdoZW4gY2FsbGluZyB1cGRhdGVJbnN0YW5jZUNvbmYuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2ZXJpZnkgcmVxdWlyZWQgcGFyYW1ldGVyICdwdXRJbnN0YW5jZUNvbmYnIGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgaWYgKHB1dEluc3RhbmNlQ29uZiA9PT0gbnVsbCB8fCBwdXRJbnN0YW5jZUNvbmYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZXF1aXJlZEVycm9yKCdwdXRJbnN0YW5jZUNvbmYnLCdSZXF1aXJlZCBwYXJhbWV0ZXIgcHV0SW5zdGFuY2VDb25mIHdhcyBudWxsIG9yIHVuZGVmaW5lZCB3aGVuIGNhbGxpbmcgdXBkYXRlSW5zdGFuY2VDb25mLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJQYXRoID0gYC9pbnN0YW5jZXMtY29uZi97YWxmSW5zdGFuY2VJZH1gXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoYHske1wiYWxmSW5zdGFuY2VJZFwifX1gLCBlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGFsZkluc3RhbmNlSWQpKSk7XG4gICAgICAgICAgICAvLyB1c2UgZHVtbXkgYmFzZSBVUkwgc3RyaW5nIGJlY2F1c2UgdGhlIFVSTCBjb25zdHJ1Y3RvciBvbmx5IGFjY2VwdHMgYWJzb2x1dGUgVVJMcy5cbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyVXJsT2JqID0gbmV3IFVSTChsb2NhbFZhclBhdGgsICdodHRwczovL2V4YW1wbGUuY29tJyk7XG4gICAgICAgICAgICBsZXQgYmFzZU9wdGlvbnM7XG4gICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGJhc2VPcHRpb25zID0gY29uZmlndXJhdGlvbi5iYXNlT3B0aW9ucztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJSZXF1ZXN0T3B0aW9ucyA9IHsgbWV0aG9kOiAnUFVUJywgLi4uYmFzZU9wdGlvbnMsIC4uLm9wdGlvbnN9O1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJIZWFkZXJQYXJhbWV0ZXIgPSB7fSBhcyBhbnk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyID0ge30gYXMgYW55O1xuXG5cbiAgICBcbiAgICAgICAgICAgIGxvY2FsVmFySGVhZGVyUGFyYW1ldGVyWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblxuICAgICAgICAgICAgY29uc3QgcXVlcnlQYXJhbWV0ZXJzID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhsb2NhbFZhclVybE9iai5zZWFyY2gpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbG9jYWxWYXJRdWVyeVBhcmFtZXRlcikge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoa2V5LCBsb2NhbFZhclF1ZXJ5UGFyYW1ldGVyW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucy5xdWVyeSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1ldGVycy5zZXQoa2V5LCBvcHRpb25zLnF1ZXJ5W2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9jYWxWYXJVcmxPYmouc2VhcmNoID0gKG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlQYXJhbWV0ZXJzKSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGxldCBoZWFkZXJzRnJvbUJhc2VPcHRpb25zID0gYmFzZU9wdGlvbnMgJiYgYmFzZU9wdGlvbnMuaGVhZGVycyA/IGJhc2VPcHRpb25zLmhlYWRlcnMgOiB7fTtcbiAgICAgICAgICAgIGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IHsuLi5sb2NhbFZhckhlYWRlclBhcmFtZXRlciwgLi4uaGVhZGVyc0Zyb21CYXNlT3B0aW9ucywgLi4ub3B0aW9ucy5oZWFkZXJzfTtcbiAgICAgICAgICAgIGNvbnN0IG5lZWRzU2VyaWFsaXphdGlvbiA9ICh0eXBlb2YgcHV0SW5zdGFuY2VDb25mICE9PSBcInN0cmluZ1wiKSAmJiBjb25maWd1cmF0aW9uLmlzSnNvbk1pbWUobG9jYWxWYXJSZXF1ZXN0T3B0aW9ucy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSk7XG4gICAgICAgICAgICBsb2NhbFZhclJlcXVlc3RPcHRpb25zLmRhdGEgPSAgbmVlZHNTZXJpYWxpemF0aW9uID8gSlNPTi5zdHJpbmdpZnkocHV0SW5zdGFuY2VDb25mICE9PSB1bmRlZmluZWQgPyBwdXRJbnN0YW5jZUNvbmYgOiB7fSkgOiAocHV0SW5zdGFuY2VDb25mIHx8IFwiXCIpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVybDogbG9jYWxWYXJVcmxPYmoucGF0aG5hbWUgKyBsb2NhbFZhclVybE9iai5zZWFyY2ggKyBsb2NhbFZhclVybE9iai5oYXNoLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGxvY2FsVmFyUmVxdWVzdE9wdGlvbnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH1cbn07XG5cbi8qKlxuICogSW5zdGFuY2VzQ29uZkFwaSAtIGZ1bmN0aW9uYWwgcHJvZ3JhbW1pbmcgaW50ZXJmYWNlXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBJbnN0YW5jZXNDb25mQXBpRnAgPSBmdW5jdGlvbihjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGFuIEFsZnJlc2NvIGluc3RhbmNlIHJlcXVlc3QuIFBlciB1c2VySWQgeW91IGNhbiBvbmx5IGNyZWF0ZSBtYXggMiBpbnN0YW5jZXMhIFBsZWFzZSBjaGVjayBob3cgbXVjaCB5b3UgYWxyZWFkeSBoYXZlIGNyZWF0ZWQgYXMgeW91IGRvblxcJ3QgZ2V0IGEgd2FybmluZyBoZXJlISAgQWZ0ZXIgeW91ciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSBhbiBpbnN0YW5jZSByZXF1ZXN0IGNoZWNrIG91dCB0aGUgR0VUIC9pbnN0YW5jZXPigIsve2FsZkluc3RhbmNlSWR9IGVuZHBvaW50IHdpdGggeW91ciBhbGZJbnN0YW5jZUlkLiAgUGxlYXNlIHJlZ2FyZCB0aGF0IHRoZSBhbGZyZXNjbyBpbnN0YW5jZSBuZWVkcyBhYm91dCAzIG1pbnV0ZXMgZm9yIGJlZWluZyByZWFjaGFibGUuIFxuICAgICAgICAgKiBAcGFyYW0ge05ld0luc3RhbmNlQ29uZn0gbmV3SW5zdGFuY2VDb25mIEJvZHkgZm9yIEFsZiBJbnN0YW5jZSBDcmVhdGUuIFBsZWFzZSBpbnNlcnQgeW91ciB1c2VybmFtZSBmb3IgdXNlcklkLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgYXN5bmMgYWRkSW5zdGFuY2VDb25mKG5ld0luc3RhbmNlQ29uZjogTmV3SW5zdGFuY2VDb25mLCBvcHRpb25zPzogYW55KTogUHJvbWlzZTwoYXhpb3M/OiBBeGlvc0luc3RhbmNlLCBiYXNlUGF0aD86IHN0cmluZykgPT4gQXhpb3NQcm9taXNlPEluc3RhbmNlQ29uZj4+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0gYXdhaXQgSW5zdGFuY2VzQ29uZkFwaUF4aW9zUGFyYW1DcmVhdG9yKGNvbmZpZ3VyYXRpb24pLmFkZEluc3RhbmNlQ29uZihuZXdJbnN0YW5jZUNvbmYsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIChheGlvczogQXhpb3NJbnN0YW5jZSA9IGdsb2JhbEF4aW9zLCBiYXNlUGF0aDogc3RyaW5nID0gQkFTRV9QQVRIKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXhpb3NSZXF1ZXN0QXJncyA9IHsuLi5sb2NhbFZhckF4aW9zQXJncy5vcHRpb25zLCB1cmw6IGJhc2VQYXRoICsgbG9jYWxWYXJBeGlvc0FyZ3MudXJsfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucmVxdWVzdChheGlvc1JlcXVlc3RBcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIGRldGFpbHMgYWJvdXQgYSBzcGVjaWZpYyBhbGZyZXNjbyByZXF1ZXN0IGNvbmZpZ3VyYXRpb24uIFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gYWxmSW5zdGFuY2VJZCBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IHVzZXJJZCBVc2VyIGlkIFF1ZXJ5IFBhcmFtZXRlci4gUGxlYXNlIHVzZSB5b3UgdXNlciBuYW1lIGZyb20gdGhlIHN5c3RlbS5cbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIGFzeW5jIGdldEluc3RhbmNlQ29uZihhbGZJbnN0YW5jZUlkOiBvYmplY3QsIHVzZXJJZDogb2JqZWN0LCBvcHRpb25zPzogYW55KTogUHJvbWlzZTwoYXhpb3M/OiBBeGlvc0luc3RhbmNlLCBiYXNlUGF0aD86IHN0cmluZykgPT4gQXhpb3NQcm9taXNlPEluc3RhbmNlQ29uZj4+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0gYXdhaXQgSW5zdGFuY2VzQ29uZkFwaUF4aW9zUGFyYW1DcmVhdG9yKGNvbmZpZ3VyYXRpb24pLmdldEluc3RhbmNlQ29uZihhbGZJbnN0YW5jZUlkLCB1c2VySWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIChheGlvczogQXhpb3NJbnN0YW5jZSA9IGdsb2JhbEF4aW9zLCBiYXNlUGF0aDogc3RyaW5nID0gQkFTRV9QQVRIKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXhpb3NSZXF1ZXN0QXJncyA9IHsuLi5sb2NhbFZhckF4aW9zQXJncy5vcHRpb25zLCB1cmw6IGJhc2VQYXRoICsgbG9jYWxWYXJBeGlvc0FyZ3MudXJsfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucmVxdWVzdChheGlvc1JlcXVlc3RBcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIGRldGFpbHMgYWJvdXQgYWxsIHJlcXVlc3RlZCBBbGZyZXNjbyBpbnN0YW5jZXMuIElmIHlvdSBzZWUgaGVyZSB5b3VyIHJlcXVlc3RlZCBBbGZyZXNjbyBpbnN0YW5jZSBpdCBpcyBsaWtlbHkgdGhhdCBpdCB3YXMgY3JlYXRlZCBhbHJlYWR5LiBIb3dldmVyIGl0IGlzIG5vdCBndWFyZW50ZWQgYXMgbWlnaHQgeW91ciBsaW1pdCBwZXIgdXNlciBpcyByZWFjaGVkIG9yIG90aGVyIHRoZSBvdmVyYWxsIG1heGltdW0gbGltaXQgb2YgaW5zdGFuY2VzIHdhcyByZWFjaGVkLiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IFt1c2VySWRdIFVzZXIgaWQgUXVlcnkgUGFyYW1ldGVyLiBQbGVhc2UgdXNlIHlvdSB1c2VyIG5hbWUgZnJvbSB0aGUgc3lzdGVtLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgYXN5bmMgZ2V0SW5zdGFuY2VDb25mcyh1c2VySWQ/OiBvYmplY3QsIG9wdGlvbnM/OiBhbnkpOiBQcm9taXNlPChheGlvcz86IEF4aW9zSW5zdGFuY2UsIGJhc2VQYXRoPzogc3RyaW5nKSA9PiBBeGlvc1Byb21pc2U8QXJyYXk8SW5zdGFuY2VDb25mPj4+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0gYXdhaXQgSW5zdGFuY2VzQ29uZkFwaUF4aW9zUGFyYW1DcmVhdG9yKGNvbmZpZ3VyYXRpb24pLmdldEluc3RhbmNlQ29uZnModXNlcklkLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiAoYXhpb3M6IEF4aW9zSW5zdGFuY2UgPSBnbG9iYWxBeGlvcywgYmFzZVBhdGg6IHN0cmluZyA9IEJBU0VfUEFUSCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF4aW9zUmVxdWVzdEFyZ3MgPSB7Li4ubG9jYWxWYXJBeGlvc0FyZ3Mub3B0aW9ucywgdXJsOiBiYXNlUGF0aCArIGxvY2FsVmFyQXhpb3NBcmdzLnVybH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnJlcXVlc3QoYXhpb3NSZXF1ZXN0QXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBhc3luYyBvcHRpb25JbnN0YW5jZUNvbmYob3B0aW9ucz86IGFueSk6IFByb21pc2U8KGF4aW9zPzogQXhpb3NJbnN0YW5jZSwgYmFzZVBhdGg/OiBzdHJpbmcpID0+IEF4aW9zUHJvbWlzZTx2b2lkPj4ge1xuICAgICAgICAgICAgY29uc3QgbG9jYWxWYXJBeGlvc0FyZ3MgPSBhd2FpdCBJbnN0YW5jZXNDb25mQXBpQXhpb3NQYXJhbUNyZWF0b3IoY29uZmlndXJhdGlvbikub3B0aW9uSW5zdGFuY2VDb25mKG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIChheGlvczogQXhpb3NJbnN0YW5jZSA9IGdsb2JhbEF4aW9zLCBiYXNlUGF0aDogc3RyaW5nID0gQkFTRV9QQVRIKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXhpb3NSZXF1ZXN0QXJncyA9IHsuLi5sb2NhbFZhckF4aW9zQXJncy5vcHRpb25zLCB1cmw6IGJhc2VQYXRoICsgbG9jYWxWYXJBeGlvc0FyZ3MudXJsfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucmVxdWVzdChheGlvc1JlcXVlc3RBcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGFsZkluc3RhbmNlSWQgXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBhc3luYyBvcHRpb25zSW5zdGFuY2VzQ29uZihhbGZJbnN0YW5jZUlkOiBvYmplY3QsIG9wdGlvbnM/OiBhbnkpOiBQcm9taXNlPChheGlvcz86IEF4aW9zSW5zdGFuY2UsIGJhc2VQYXRoPzogc3RyaW5nKSA9PiBBeGlvc1Byb21pc2U8dm9pZD4+IHtcbiAgICAgICAgICAgIGNvbnN0IGxvY2FsVmFyQXhpb3NBcmdzID0gYXdhaXQgSW5zdGFuY2VzQ29uZkFwaUF4aW9zUGFyYW1DcmVhdG9yKGNvbmZpZ3VyYXRpb24pLm9wdGlvbnNJbnN0YW5jZXNDb25mKGFsZkluc3RhbmNlSWQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIChheGlvczogQXhpb3NJbnN0YW5jZSA9IGdsb2JhbEF4aW9zLCBiYXNlUGF0aDogc3RyaW5nID0gQkFTRV9QQVRIKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXhpb3NSZXF1ZXN0QXJncyA9IHsuLi5sb2NhbFZhckF4aW9zQXJncy5vcHRpb25zLCB1cmw6IGJhc2VQYXRoICsgbG9jYWxWYXJBeGlvc0FyZ3MudXJsfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucmVxdWVzdChheGlvc1JlcXVlc3RBcmdzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXF1ZXN0cyBhdHRyaWJ1dGUgaW5zdGFuY2UgY2hhbmdlcy4gUGxlYXNlIHJlZ2FyZCBpZiB5b3UgcHV0IGJhY2sgeW91ciBpbnN0YW5jZSBmcm9tIHN0b3BwZWQgdG8gcnVubmluZyBpdCBjYW4gdGFrZSBzb21lIG1pbnV0ZXMgZm9yIEFDUyBmaW5pc2hpbmcgYm9vdGluZy4gXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbGZJbnN0YW5jZUlkIFxuICAgICAgICAgKiBAcGFyYW0ge1B1dEluc3RhbmNlQ29uZn0gcHV0SW5zdGFuY2VDb25mIEJvZHkgZm9yIEFsZiBJbnN0YW5jZSBVcGRhdGUuIEN1cnJlbnRseSBvbmx5IHRoZSB1cGRhdGUgb2YgdGhlIHN0YXR1cyBpcyBzdXBwb3J0ZWQhXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBhc3luYyB1cGRhdGVJbnN0YW5jZUNvbmYoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCBwdXRJbnN0YW5jZUNvbmY6IFB1dEluc3RhbmNlQ29uZiwgb3B0aW9ucz86IGFueSk6IFByb21pc2U8KGF4aW9zPzogQXhpb3NJbnN0YW5jZSwgYmFzZVBhdGg/OiBzdHJpbmcpID0+IEF4aW9zUHJvbWlzZTxJbnN0YW5jZUNvbmY+PiB7XG4gICAgICAgICAgICBjb25zdCBsb2NhbFZhckF4aW9zQXJncyA9IGF3YWl0IEluc3RhbmNlc0NvbmZBcGlBeGlvc1BhcmFtQ3JlYXRvcihjb25maWd1cmF0aW9uKS51cGRhdGVJbnN0YW5jZUNvbmYoYWxmSW5zdGFuY2VJZCwgcHV0SW5zdGFuY2VDb25mLCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiAoYXhpb3M6IEF4aW9zSW5zdGFuY2UgPSBnbG9iYWxBeGlvcywgYmFzZVBhdGg6IHN0cmluZyA9IEJBU0VfUEFUSCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF4aW9zUmVxdWVzdEFyZ3MgPSB7Li4ubG9jYWxWYXJBeGlvc0FyZ3Mub3B0aW9ucywgdXJsOiBiYXNlUGF0aCArIGxvY2FsVmFyQXhpb3NBcmdzLnVybH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnJlcXVlc3QoYXhpb3NSZXF1ZXN0QXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH1cbn07XG5cbi8qKlxuICogSW5zdGFuY2VzQ29uZkFwaSAtIGZhY3RvcnkgaW50ZXJmYWNlXG4gKiBAZXhwb3J0XG4gKi9cbmV4cG9ydCBjb25zdCBJbnN0YW5jZXNDb25mQXBpRmFjdG9yeSA9IGZ1bmN0aW9uIChjb25maWd1cmF0aW9uPzogQ29uZmlndXJhdGlvbiwgYmFzZVBhdGg/OiBzdHJpbmcsIGF4aW9zPzogQXhpb3NJbnN0YW5jZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGVzIGFuIEFsZnJlc2NvIGluc3RhbmNlIHJlcXVlc3QuIFBlciB1c2VySWQgeW91IGNhbiBvbmx5IGNyZWF0ZSBtYXggMiBpbnN0YW5jZXMhIFBsZWFzZSBjaGVjayBob3cgbXVjaCB5b3UgYWxyZWFkeSBoYXZlIGNyZWF0ZWQgYXMgeW91IGRvblxcJ3QgZ2V0IGEgd2FybmluZyBoZXJlISAgQWZ0ZXIgeW91ciBjcmVhdGVkIHN1Y2Nlc3NmdWxseSBhbiBpbnN0YW5jZSByZXF1ZXN0IGNoZWNrIG91dCB0aGUgR0VUIC9pbnN0YW5jZXPigIsve2FsZkluc3RhbmNlSWR9IGVuZHBvaW50IHdpdGggeW91ciBhbGZJbnN0YW5jZUlkLiAgUGxlYXNlIHJlZ2FyZCB0aGF0IHRoZSBhbGZyZXNjbyBpbnN0YW5jZSBuZWVkcyBhYm91dCAzIG1pbnV0ZXMgZm9yIGJlZWluZyByZWFjaGFibGUuIFxuICAgICAgICAgKiBAcGFyYW0ge05ld0luc3RhbmNlQ29uZn0gbmV3SW5zdGFuY2VDb25mIEJvZHkgZm9yIEFsZiBJbnN0YW5jZSBDcmVhdGUuIFBsZWFzZSBpbnNlcnQgeW91ciB1c2VybmFtZSBmb3IgdXNlcklkLlxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgYWRkSW5zdGFuY2VDb25mKG5ld0luc3RhbmNlQ29uZjogTmV3SW5zdGFuY2VDb25mLCBvcHRpb25zPzogYW55KTogQXhpb3NQcm9taXNlPEluc3RhbmNlQ29uZj4ge1xuICAgICAgICAgICAgcmV0dXJuIEluc3RhbmNlc0NvbmZBcGlGcChjb25maWd1cmF0aW9uKS5hZGRJbnN0YW5jZUNvbmYobmV3SW5zdGFuY2VDb25mLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0cyBkZXRhaWxzIGFib3V0IGEgc3BlY2lmaWMgYWxmcmVzY28gcmVxdWVzdCBjb25maWd1cmF0aW9uLiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGFsZkluc3RhbmNlSWQgXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSB1c2VySWQgVXNlciBpZCBRdWVyeSBQYXJhbWV0ZXIuIFBsZWFzZSB1c2UgeW91IHVzZXIgbmFtZSBmcm9tIHRoZSBzeXN0ZW0uXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBnZXRJbnN0YW5jZUNvbmYoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCB1c2VySWQ6IG9iamVjdCwgb3B0aW9ucz86IGFueSk6IEF4aW9zUHJvbWlzZTxJbnN0YW5jZUNvbmY+IHtcbiAgICAgICAgICAgIHJldHVybiBJbnN0YW5jZXNDb25mQXBpRnAoY29uZmlndXJhdGlvbikuZ2V0SW5zdGFuY2VDb25mKGFsZkluc3RhbmNlSWQsIHVzZXJJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldHMgZGV0YWlscyBhYm91dCBhbGwgcmVxdWVzdGVkIEFsZnJlc2NvIGluc3RhbmNlcy4gSWYgeW91IHNlZSBoZXJlIHlvdXIgcmVxdWVzdGVkIEFsZnJlc2NvIGluc3RhbmNlIGl0IGlzIGxpa2VseSB0aGF0IGl0IHdhcyBjcmVhdGVkIGFscmVhZHkuIEhvd2V2ZXIgaXQgaXMgbm90IGd1YXJlbnRlZCBhcyBtaWdodCB5b3VyIGxpbWl0IHBlciB1c2VyIGlzIHJlYWNoZWQgb3Igb3RoZXIgdGhlIG92ZXJhbGwgbWF4aW11bSBsaW1pdCBvZiBpbnN0YW5jZXMgd2FzIHJlYWNoZWQuIFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gW3VzZXJJZF0gVXNlciBpZCBRdWVyeSBQYXJhbWV0ZXIuIFBsZWFzZSB1c2UgeW91IHVzZXIgbmFtZSBmcm9tIHRoZSBzeXN0ZW0uXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBnZXRJbnN0YW5jZUNvbmZzKHVzZXJJZD86IG9iamVjdCwgb3B0aW9ucz86IGFueSk6IEF4aW9zUHJvbWlzZTxBcnJheTxJbnN0YW5jZUNvbmY+PiB7XG4gICAgICAgICAgICByZXR1cm4gSW5zdGFuY2VzQ29uZkFwaUZwKGNvbmZpZ3VyYXRpb24pLmdldEluc3RhbmNlQ29uZnModXNlcklkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICAgICAqL1xuICAgICAgICBvcHRpb25JbnN0YW5jZUNvbmYob3B0aW9ucz86IGFueSk6IEF4aW9zUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgICAgICByZXR1cm4gSW5zdGFuY2VzQ29uZkFwaUZwKGNvbmZpZ3VyYXRpb24pLm9wdGlvbkluc3RhbmNlQ29uZihvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBhbGZJbnN0YW5jZUlkIFxuICAgICAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAgICAgKiBAdGhyb3dzIHtSZXF1aXJlZEVycm9yfVxuICAgICAgICAgKi9cbiAgICAgICAgb3B0aW9uc0luc3RhbmNlc0NvbmYoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCBvcHRpb25zPzogYW55KTogQXhpb3NQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgICAgIHJldHVybiBJbnN0YW5jZXNDb25mQXBpRnAoY29uZmlndXJhdGlvbikub3B0aW9uc0luc3RhbmNlc0NvbmYoYWxmSW5zdGFuY2VJZCwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdChheGlvcywgYmFzZVBhdGgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlcXVlc3RzIGF0dHJpYnV0ZSBpbnN0YW5jZSBjaGFuZ2VzLiBQbGVhc2UgcmVnYXJkIGlmIHlvdSBwdXQgYmFjayB5b3VyIGluc3RhbmNlIGZyb20gc3RvcHBlZCB0byBydW5uaW5nIGl0IGNhbiB0YWtlIHNvbWUgbWludXRlcyBmb3IgQUNTIGZpbmlzaGluZyBib290aW5nLiBcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGFsZkluc3RhbmNlSWQgXG4gICAgICAgICAqIEBwYXJhbSB7UHV0SW5zdGFuY2VDb25mfSBwdXRJbnN0YW5jZUNvbmYgQm9keSBmb3IgQWxmIEluc3RhbmNlIFVwZGF0ZS4gQ3VycmVudGx5IG9ubHkgdGhlIHVwZGF0ZSBvZiB0aGUgc3RhdHVzIGlzIHN1cHBvcnRlZCFcbiAgICAgICAgICogQHBhcmFtIHsqfSBbb3B0aW9uc10gT3ZlcnJpZGUgaHR0cCByZXF1ZXN0IG9wdGlvbi5cbiAgICAgICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgICAgICovXG4gICAgICAgIHVwZGF0ZUluc3RhbmNlQ29uZihhbGZJbnN0YW5jZUlkOiBvYmplY3QsIHB1dEluc3RhbmNlQ29uZjogUHV0SW5zdGFuY2VDb25mLCBvcHRpb25zPzogYW55KTogQXhpb3NQcm9taXNlPEluc3RhbmNlQ29uZj4ge1xuICAgICAgICAgICAgcmV0dXJuIEluc3RhbmNlc0NvbmZBcGlGcChjb25maWd1cmF0aW9uKS51cGRhdGVJbnN0YW5jZUNvbmYoYWxmSW5zdGFuY2VJZCwgcHV0SW5zdGFuY2VDb25mLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KGF4aW9zLCBiYXNlUGF0aCkpO1xuICAgICAgICB9LFxuICAgIH07XG59O1xuXG4vKipcbiAqIEluc3RhbmNlc0NvbmZBcGkgLSBvYmplY3Qtb3JpZW50ZWQgaW50ZXJmYWNlXG4gKiBAZXhwb3J0XG4gKiBAY2xhc3MgSW5zdGFuY2VzQ29uZkFwaVxuICogQGV4dGVuZHMge0Jhc2VBUEl9XG4gKi9cbmV4cG9ydCBjbGFzcyBJbnN0YW5jZXNDb25mQXBpIGV4dGVuZHMgQmFzZUFQSSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBBbGZyZXNjbyBpbnN0YW5jZSByZXF1ZXN0LiBQZXIgdXNlcklkIHlvdSBjYW4gb25seSBjcmVhdGUgbWF4IDIgaW5zdGFuY2VzISBQbGVhc2UgY2hlY2sgaG93IG11Y2ggeW91IGFscmVhZHkgaGF2ZSBjcmVhdGVkIGFzIHlvdSBkb25cXCd0IGdldCBhIHdhcm5pbmcgaGVyZSEgIEFmdGVyIHlvdXIgY3JlYXRlZCBzdWNjZXNzZnVsbHkgYW4gaW5zdGFuY2UgcmVxdWVzdCBjaGVjayBvdXQgdGhlIEdFVCAvaW5zdGFuY2Vz4oCLL3thbGZJbnN0YW5jZUlkfSBlbmRwb2ludCB3aXRoIHlvdXIgYWxmSW5zdGFuY2VJZC4gIFBsZWFzZSByZWdhcmQgdGhhdCB0aGUgYWxmcmVzY28gaW5zdGFuY2UgbmVlZHMgYWJvdXQgMyBtaW51dGVzIGZvciBiZWVpbmcgcmVhY2hhYmxlLiBcbiAgICAgKiBAcGFyYW0ge05ld0luc3RhbmNlQ29uZn0gbmV3SW5zdGFuY2VDb25mIEJvZHkgZm9yIEFsZiBJbnN0YW5jZSBDcmVhdGUuIFBsZWFzZSBpbnNlcnQgeW91ciB1c2VybmFtZSBmb3IgdXNlcklkLlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgSW5zdGFuY2VzQ29uZkFwaVxuICAgICAqL1xuICAgIHB1YmxpYyBhZGRJbnN0YW5jZUNvbmYobmV3SW5zdGFuY2VDb25mOiBOZXdJbnN0YW5jZUNvbmYsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIEluc3RhbmNlc0NvbmZBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmFkZEluc3RhbmNlQ29uZihuZXdJbnN0YW5jZUNvbmYsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgZGV0YWlscyBhYm91dCBhIHNwZWNpZmljIGFsZnJlc2NvIHJlcXVlc3QgY29uZmlndXJhdGlvbi4gXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFsZkluc3RhbmNlSWQgXG4gICAgICogQHBhcmFtIHtvYmplY3R9IHVzZXJJZCBVc2VyIGlkIFF1ZXJ5IFBhcmFtZXRlci4gUGxlYXNlIHVzZSB5b3UgdXNlciBuYW1lIGZyb20gdGhlIHN5c3RlbS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlc0NvbmZBcGlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5zdGFuY2VDb25mKGFsZkluc3RhbmNlSWQ6IG9iamVjdCwgdXNlcklkOiBvYmplY3QsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIEluc3RhbmNlc0NvbmZBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmdldEluc3RhbmNlQ29uZihhbGZJbnN0YW5jZUlkLCB1c2VySWQsIG9wdGlvbnMpLnRoZW4oKHJlcXVlc3QpID0+IHJlcXVlc3QodGhpcy5heGlvcywgdGhpcy5iYXNlUGF0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgZGV0YWlscyBhYm91dCBhbGwgcmVxdWVzdGVkIEFsZnJlc2NvIGluc3RhbmNlcy4gSWYgeW91IHNlZSBoZXJlIHlvdXIgcmVxdWVzdGVkIEFsZnJlc2NvIGluc3RhbmNlIGl0IGlzIGxpa2VseSB0aGF0IGl0IHdhcyBjcmVhdGVkIGFscmVhZHkuIEhvd2V2ZXIgaXQgaXMgbm90IGd1YXJlbnRlZCBhcyBtaWdodCB5b3VyIGxpbWl0IHBlciB1c2VyIGlzIHJlYWNoZWQgb3Igb3RoZXIgdGhlIG92ZXJhbGwgbWF4aW11bSBsaW1pdCBvZiBpbnN0YW5jZXMgd2FzIHJlYWNoZWQuIFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBbdXNlcklkXSBVc2VyIGlkIFF1ZXJ5IFBhcmFtZXRlci4gUGxlYXNlIHVzZSB5b3UgdXNlciBuYW1lIGZyb20gdGhlIHN5c3RlbS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlc0NvbmZBcGlcbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0SW5zdGFuY2VDb25mcyh1c2VySWQ/OiBvYmplY3QsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIEluc3RhbmNlc0NvbmZBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLmdldEluc3RhbmNlQ29uZnModXNlcklkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlc0NvbmZBcGlcbiAgICAgKi9cbiAgICBwdWJsaWMgb3B0aW9uSW5zdGFuY2VDb25mKG9wdGlvbnM/OiBhbnkpIHtcbiAgICAgICAgcmV0dXJuIEluc3RhbmNlc0NvbmZBcGlGcCh0aGlzLmNvbmZpZ3VyYXRpb24pLm9wdGlvbkluc3RhbmNlQ29uZihvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYWxmSW5zdGFuY2VJZCBcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPdmVycmlkZSBodHRwIHJlcXVlc3Qgb3B0aW9uLlxuICAgICAqIEB0aHJvd3Mge1JlcXVpcmVkRXJyb3J9XG4gICAgICogQG1lbWJlcm9mIEluc3RhbmNlc0NvbmZBcGlcbiAgICAgKi9cbiAgICBwdWJsaWMgb3B0aW9uc0luc3RhbmNlc0NvbmYoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCBvcHRpb25zPzogYW55KSB7XG4gICAgICAgIHJldHVybiBJbnN0YW5jZXNDb25mQXBpRnAodGhpcy5jb25maWd1cmF0aW9uKS5vcHRpb25zSW5zdGFuY2VzQ29uZihhbGZJbnN0YW5jZUlkLCBvcHRpb25zKS50aGVuKChyZXF1ZXN0KSA9PiByZXF1ZXN0KHRoaXMuYXhpb3MsIHRoaXMuYmFzZVBhdGgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0cyBhdHRyaWJ1dGUgaW5zdGFuY2UgY2hhbmdlcy4gUGxlYXNlIHJlZ2FyZCBpZiB5b3UgcHV0IGJhY2sgeW91ciBpbnN0YW5jZSBmcm9tIHN0b3BwZWQgdG8gcnVubmluZyBpdCBjYW4gdGFrZSBzb21lIG1pbnV0ZXMgZm9yIEFDUyBmaW5pc2hpbmcgYm9vdGluZy4gXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGFsZkluc3RhbmNlSWQgXG4gICAgICogQHBhcmFtIHtQdXRJbnN0YW5jZUNvbmZ9IHB1dEluc3RhbmNlQ29uZiBCb2R5IGZvciBBbGYgSW5zdGFuY2UgVXBkYXRlLiBDdXJyZW50bHkgb25seSB0aGUgdXBkYXRlIG9mIHRoZSBzdGF0dXMgaXMgc3VwcG9ydGVkIVxuICAgICAqIEBwYXJhbSB7Kn0gW29wdGlvbnNdIE92ZXJyaWRlIGh0dHAgcmVxdWVzdCBvcHRpb24uXG4gICAgICogQHRocm93cyB7UmVxdWlyZWRFcnJvcn1cbiAgICAgKiBAbWVtYmVyb2YgSW5zdGFuY2VzQ29uZkFwaVxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGVJbnN0YW5jZUNvbmYoYWxmSW5zdGFuY2VJZDogb2JqZWN0LCBwdXRJbnN0YW5jZUNvbmY6IFB1dEluc3RhbmNlQ29uZiwgb3B0aW9ucz86IGFueSkge1xuICAgICAgICByZXR1cm4gSW5zdGFuY2VzQ29uZkFwaUZwKHRoaXMuY29uZmlndXJhdGlvbikudXBkYXRlSW5zdGFuY2VDb25mKGFsZkluc3RhbmNlSWQsIHB1dEluc3RhbmNlQ29uZiwgb3B0aW9ucykudGhlbigocmVxdWVzdCkgPT4gcmVxdWVzdCh0aGlzLmF4aW9zLCB0aGlzLmJhc2VQYXRoKSk7XG4gICAgfVxufVxuXG5cbiJdfQ==
